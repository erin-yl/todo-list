"use strict";(self.webpackChunktodo_list=self.webpackChunktodo_list||[]).push([[792],{280:function(t,e,o){var n=class{constructor(t,e,o,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(this.id="todo-".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,11)),this.title=t,this.description=e,this.dueDate=null,o instanceof Date&&!isNaN(o.valueOf()))this.dueDate=o;else if("string"==typeof o&&""!==o.trim()){const t=new Date(o.trim());this.dueDate=isNaN(t.valueOf())?null:t}else this.dueDate=null;this.priority=n,this.tags=Array.isArray(r)?r:[],this.completed=i}toggleComplete(){this.completed=!this.completed}updateDetails(t){if(void 0!==t.title&&(this.title=t.title),void 0!==t.description&&(this.description=t.description),void 0!==t.dueDate)if(t.dueDate instanceof Date&&!isNaN(t.dueDate.valueOf()))this.dueDate=t.dueDate;else if("string"==typeof t.dueDate&&""!==t.dueDate.trim()){const e=new Date(t.dueDate.trim());this.dueDate=isNaN(e.valueOf())?null:e}else this.dueDate=null;t.priority&&["low","medium","high"].includes(t.priority)&&(this.priority=t.priority),t.tags&&Array.isArray(t.tags)?this.tags=t.tags.map((t=>t.trim())).filter((t=>t.length>0)):void 0!==t.tagsString&&this.setTagsFromString(t.tagsString)}addTag(t){const e=t.trim();e&&!this.tags.includes(e)&&this.tags.push(e)}removeTag(t){const e=t.trim();this.tags=this.tags.filter((t=>t!==e))}getTagsString(){return this.tags.join(", ")}setTagsFromString(t){"string"==typeof t&&(this.tags=t.split(",").map((t=>t.trim())).filter((t=>t.length>0)))}},r=class{constructor(t){this.id="project-".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,11)),this.name=t,this.todos=[]}addTodo(t){return t instanceof n&&!this.todos.some((e=>e.id===t.id))&&(this.todos.push(t),!0)}removeTodo(t){this.todos=this.todos.filter((e=>e.id!==t))}getTodoById(t){return this.todos.find((e=>e.id===t))}getAllTodos(){return[...this.todos]}getTodosByPriority(t){return this.todos.filter((e=>e.priority===t))}getTodosByCompletion(t){return this.todos.filter((e=>e.completed===t))}getTodosByTag(t){const e=t.trim().toLowerCase();return e?this.todos.filter((t=>t.tags.some((t=>t.toLowerCase()===e)))):this.getAllTodos()}getUniqueTags(){const t=new Set;return this.todos.forEach((e=>{e.tags.forEach((e=>t.add(e.trim())))})),Array.from(t).sort()}};const i="todoAppProjects";var d=function(t){try{const e=JSON.stringify(t);localStorage.setItem(i,e)}catch(t){console.error("Error saving data to localStorage:",t)}},a=function(){try{const t=localStorage.getItem(i);if(null===t)return;return JSON.parse(t)}catch(t){return void console.error("Error loading data from localStorage:",t)}};const s=["tagsString"];function c(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function l(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?c(Object(o),!0).forEach((function(e){u(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function u(t,e,o){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}const m=(()=>{let t=[],e=null;function o(){d(t)}function i(e){return t.find((t=>t.id===e))}function c(){return t.reduce(((t,e)=>t.concat(e.getAllTodos())),[])}const u={high:1,medium:2,low:3};return function(){const i=a();i&&i.length>0?(t=i.map((t=>{const e=new r(t.name);return e.id=t.id,e.todos=t.todos.map((t=>{const e=new n(t.title,t.description,t.dueDate,t.priority,t.tags||[],t.completed);return e.id=t.id,e})),e})),e=t[0]||null):function(){const i=new r("Work");i.addTodo(new n("Finish Q2 report","Compile required data and finalize the conclusion.",new Date(2025,4,26),"high",["report"],!1)),i.addTodo(new n("Team meeting prep","Prepare agenda and slides for Monday's team meeting.",new Date(2025,5,6),"medium",["meeting"],!1)),i.addTodo(new n("Client follow-up","Call John Doe regarding project Alpha.","","medium",["client"],!0));const d=new r("Personal");d.addTodo(new n("Grocery shopping","Milk, eggs, chicken, fruits.",new Date(2025,4,20),"low",["home","shopping"],!1)),d.addTodo(new n("Book doctor appointment","Annual check-up.",new Date(2025,5,10),"high",["health"],!1));const a=new r("Learning");a.addTodo(new n("Webpack Deep Dive","Understand loaders and plugins.",new Date(2025,4,30),"medium",["dev"],!0)),a.addTodo(new n('Read "The Pragmatic Programmer"',"Chapter 3-5","","low",["reading","dev"],!1)),t=[i,d,a],e=i,o()}()}(),{addProject:function(e){if(e&&!t.find((t=>t.name.toLowerCase()===e.toLowerCase()))){const n=new r(e);return t.push(n),o(),n}return null},updateProject:function(e,n){const r=i(e);return r?t.some((t=>t.id!==e&&t.name.toLowerCase()===n.toLowerCase()))?{error:"duplicate",project:r}:(r.name=n,o(),r):null},removeProject:function(n){const r=t.findIndex((t=>t.id===n));if(r>-1){if(1===t.length)return{error:"last_project"};const i=t.splice(r,1)[0];return e&&e.id===n&&(e=t.length>0?t[0]:null),o(),{success:!0,removedProjectName:i.name,newCurrentProject:e}}return{error:"not_found"}},getProjectById:i,getAllProjects:function(){return[...t]},setCurrentProject:function(t){const o=i(t);return!!o&&(e=o,!0)},getCurrentProject:function(){return e},addTodoToProject:function(t,e){const r=i(t);if(r){const{title:t,description:i,dueDate:d,priority:a,tagsString:s}=e,c=new n(t,i,d,a);return s&&c.setTagsFromString(s),r.addTodo(c),o(),c}return null},removeTodoFromProject:function(t,e){const n=i(t);return!!n&&(n.removeTodo(e),o(),!0)},updateTodoInProject:function(t,e,n){const r=i(t);if(r){const t=r.getTodoById(e);if(t){if(void 0!==n.tagsString){t.setTagsFromString(n.tagsString);const{tagsString:e}=n,o=function(t,e){if(null==t)return{};var o,n,r=function(t,e){if(null==t)return{};var o={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;o[n]=t[n]}return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)o=i[n],-1===e.indexOf(o)&&{}.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}(n,s);t.updateDetails(o)}else t.updateDetails(n);return o(),t}}return null},toggleTodoComplete:function(t,e){const n=i(t);if(n){const t=n.getTodoById(e);if(t)return t.toggleComplete(),o(),t}return null},getAllTodosAcrossProjects:c,getAllTodosWithProjectInfo:function(){const e=[];return t.forEach((t=>{t.getAllTodos().forEach((o=>{e.push(l(l({},o),{},{originalProjectId:t.id,projectName:t.name}))}))})),e},searchTodosInList:function(t,e){if(!e||""===e.trim())return t;const o=e.toLowerCase();return t.filter((t=>t.title.toLowerCase().includes(o)||t.description.toLowerCase().includes(o)))},getAllTagsAcrossProjects:function(){const e=new Set;return t.forEach((t=>{t.getUniqueTags().forEach((t=>e.add(t)))})),Array.from(e).sort()},filterTodosByTagAcrossProjects:function(t){const e=c(),o=t.trim().toLowerCase();return o?e.filter((t=>t.tags.some((t=>t.toLowerCase()===o)))):e},filterTodosByPriorityAcrossProjects:function(t){return c().filter((e=>e.priority===t))},sortTodos:function(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";const n=[...t];return n.sort(((t,n)=>{let r,i;switch(e){case"title":r=t.title.toLowerCase(),i=n.title.toLowerCase();break;case"dueDate":if(null===t.dueDate&&null===n.dueDate)return 0;if(null===t.dueDate)return 1;if(null===n.dueDate)return-1;r=t.dueDate,i=n.dueDate;break;case"priority":r=u[t.priority],i=u[n.priority];break;default:return 0}let d=0;return r>i?d=1:r<i&&(d=-1),"desc"===o?-1*d:d})),n}}})();var p=m,g=o(790),f=o(471);const h=(()=>{const t=document.getElementById("projects-list"),e=document.getElementById("add-project-btn"),o=document.getElementById("current-project-title"),n=document.getElementById("add-todo-btn"),r=document.getElementById("todos-list"),i=document.getElementById("tag-filter-area"),d=document.getElementById("tag-filter-clear-btn"),a=document.getElementById("notification-area"),s=document.getElementById("project-modal"),c=document.getElementById("project-form"),l=document.getElementById("project-id"),u=document.getElementById("project-name-input"),m=document.getElementById("save-project-btn"),p=document.getElementById("close-project-modal"),h=document.getElementById("todo-modal"),j=document.getElementById("todo-form"),y=document.getElementById("todo-id"),v=document.getElementById("todo-title-input"),P=document.getElementById("todo-description-input"),E=document.getElementById("todo-dueDate-input"),T=document.getElementById("todo-priority-input"),C=document.getElementById("todo-tags-input"),w=document.getElementById("close-todo-modal");function L(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function I(t){o.textContent=t||"No project selected"}function b(t){t.querySelectorAll(".form-input, .form-select").forEach((t=>{t.setCustomValidity("")})),t.querySelectorAll(".error-message").forEach((t=>{t.textContent=""}))}function D(t,e){const o=t.parentElement.querySelector(".help-message"),n=t.parentElement.querySelector(".error-message");t.setCustomValidity(e),n.textContent=e,o&&o.remove()}return{renderProjects:function(e,o){if(L(t),!e||0===e.length){const e=document.createElement("li");return e.textContent="No projects yet.",e.classList.add("no-items"),void t.appendChild(e)}e.forEach((e=>{const n=document.createElement("li");n.dataset.projectId=e.id;const r=document.createElement("span");r.classList.add("project-name"),r.textContent=e.name,n.appendChild(r);const i=document.createElement("div");i.classList.add("project-actions");const d=document.createElement("button");d.innerHTML="Edit",d.classList.add("edit-project-btn"),d.dataset.projectId=e.id,d.title="Edit project";const a=document.createElement("button");a.innerHTML="Delete",a.classList.add("delete-project-btn"),a.dataset.projectId=e.id,a.title="Delete project",i.appendChild(d),i.appendChild(a),n.appendChild(i),e.id===o&&n.classList.add("active"),t.appendChild(n)}))},renderTodos:function(t){L(r);const e=t&&!0===t.isGlobalSearch,o=t?t.todos:[];if(I(t?t.name:"Select a Project"),!o||0===o.length){const o=document.createElement("li");return o.textContent=e?"No tasks found matching your search.":t?"No tasks in this project yet.":"Select a project or enter a search term.",o.classList.add("no-items"),void r.appendChild(o)}o.forEach((t=>{const o=document.createElement("li");o.dataset.todoId=t.id,e&&t.originalProjectId&&(o.dataset.originalProjectId=t.originalProjectId),o.classList.add("priority-".concat(t.priority)),t.completed&&o.classList.add("todo-completed");const n=document.createElement("input");n.type="checkbox",n.checked=t.completed,n.classList.add("todo-checkbox"),n.dataset.todoId=t.id;const i=document.createElement("div");i.classList.add("todo-info");const d=document.createElement("span");d.classList.add("todo-title"),d.textContent=t.title;const a=document.createElement("span");var s;if(a.classList.add("todo-due-date"),a.textContent="Due: ".concat((s=t.dueDate)instanceof Date&&(0,g.f)(s)?(0,f.GP)(s,"MMM dd, yyyy"):"No date set"),i.appendChild(n),i.appendChild(d),i.appendChild(a),e&&t.projectName){const e=document.createElement("span");e.classList.add("todo-project-label"),e.textContent="(Project: ".concat(t.projectName,")"),i.appendChild(e)}if(t.tags&&t.tags.length>0){const e=document.createElement("div");e.classList.add("todo-tags-display"),t.tags.forEach((t=>{const o=document.createElement("span");o.classList.add("tag-label"),o.textContent=t,e.appendChild(o)})),i.appendChild(e)}const c=document.createElement("div");c.classList.add("todo-actions");const l=document.createElement("button");l.textContent="Edit",l.classList.add("edit-todo-btn"),l.dataset.todoId=t.id;const u=document.createElement("button");u.textContent="Delete",u.classList.add("delete-todo-btn"),u.dataset.todoId=t.id,c.appendChild(l),c.appendChild(u),o.appendChild(i),o.appendChild(c),r.appendChild(o)}))},updateProjectTitle:I,openProjectModal:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;b(c),c.reset(),l.value="",m.textContent="Save",t&&(l.value=t.id,u.value=t.name),s.style.display="block",u.focus()},closeProjectModal:function(){s.style.display="none"},openTodoModal:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;b(j),j.reset(),y.value="",t&&(y.value=t.id,v.value=t.title,P.value=t.description,E.value=t.dueDate&&(0,g.f)(t.dueDate)?(0,f.GP)(t.dueDate,"yyyy-MM-dd"):"",T.value=t.priority,C.value=t.tags?t.getTagsString():""),j.dataset.currentProjectId=e,h.style.display="block",v.focus()},closeTodoModal:function(){h.style.display="none"},getProjectFormData:function(){b(c);let t=!0;const e=u.value.trim(),o=l.value;return u.validity.valueMissing&&(D(u,"Project name is required."),t=!1),t?{id:o,name:e}:null},getTodoFormData:function(){b(j);let t=!0;const e=v.value.trim(),o=P.value.trim(),n=E.value,r=T.value,i=C.value.trim(),d=y.value,a=j.dataset.currentProjectId;return v.validity.valueMissing&&(D(v,"Task name is required."),t=!1),t?{id:d,title:e,description:o,dueDate:n,priority:r,tagsString:i,currentProjectId:a}:null},clearElement:L,showNotification:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const o=document.createElement("div");o.classList.add("notification",e),o.textContent=t,a.appendChild(o),o.addEventListener("animationend",(t=>{"fadeOutNotification"===t.animationName&&o.remove()}))},renderTagCloud:function(t,e){if(i){if(L(i),t&&t.length>0)t.forEach((t=>{const o=document.createElement("span");o.classList.add("tag-filter-item"),o.textContent=t,o.dataset.tag=t,t===e&&o.classList.add("active"),i.appendChild(o)}));else{const t=document.createElement("span");t.textContent="No tags available for filtering.",t.style.fontSize="0.9em",t.style.color="#666",i.appendChild(t)}d&&(d.style.display=e?"inline":"none"),d&&!i.contains(d)&&t.length>0&&i.appendChild(d)}},initializeUI:function(){I("Loading projects..."),L(r);const t=document.createElement("li");t.textContent="Select or add a project to see your tasks.",r.appendChild(t),n.style.display="none"},elements:{projectModal:s,todoModal:h,projectsListUL:t,todosListUL:r,addProjectBtn:e,addTodoBtn:n,projectForm:c,todoForm:j,closeProjectModalBtn:p,closeTodoModalBtn:w,tagFilterClearBtn:d}}})();var j=h;document.addEventListener("DOMContentLoaded",(()=>{let t="",e="all",o=null,n={field:"dueDate",direction:"asc"};const r=document.getElementById("search-todos-input"),i=document.getElementById("priority-filter"),d=document.getElementById("tag-filter-area"),a=document.getElementById("tag-filter-clear-btn"),s=document.getElementById("sort-todos");function c(){let r=[],i="";const d=t&&""!==t.trim(),a=p.getCurrentProject();if(d){i="Search results for '".concat(t,"'");const e=p.getAllTodosWithProjectInfo();r=p.searchTodosInList(e,t)}else if(a){const t=p.getProjectById(a.id);t?(i=t.name,r=t.getAllTodos()):(i="Project not found",r=[])}else i="Select a project or search",r=[];!function(){let e=[];const n=p.getCurrentProject();if(t&&""!==t.trim())e=p.getAllTagsAcrossProjects();else if(n){const t=p.getProjectById(n.id);e=t?t.getUniqueTags():[]}else e=p.getAllTagsAcrossProjects();j.renderTagCloud(e,o)}();let s=[...r];if("all"!==e&&(s=s.filter((t=>t.priority===e))),o){const t=o.toLowerCase();s=s.filter((e=>e.tags.some((e=>e.toLowerCase()===t))))}const c={name:i,todos:p.sortTodos(s,n.field,n.direction),isGlobalSearch:d};j.renderTodos(c),j.updateProjectTitle(i),j.elements.addTodoBtn.style.display=a?"block":"none"}if(r&&r.addEventListener("input",(e=>{t=e.target.value,c()})),i&&i.addEventListener("change",(t=>{e=t.target.value,c()})),d&&d.addEventListener("click",(t=>{if(t.target.classList.contains("tag-filter-item")){const e=t.target.dataset.tag;o=o===e?null:e,c()}})),a&&a.addEventListener("click",(()=>{null!==o&&(o=null,c())})),j.elements.addProjectBtn.addEventListener("click",(()=>{j.openProjectModal()})),j.elements.closeProjectModalBtn.addEventListener("click",(()=>{j.closeProjectModal()})),j.elements.projectForm.addEventListener("submit",(t=>{t.preventDefault();const e=j.getProjectFormData();if(e){let t,o="added";if(e.id){if(t=p.updateProject(e.id,e.name),o="updated",t&&"duplicate"===t.error)return void j.showNotification('Project name "'.concat(e.name,'" already exists.'),"error")}else t=p.addProject(e.name);t&&!t.error?("added"===o&&p.setCurrentProject(t.id),l(),c(),j.closeProjectModal(),j.showNotification('Project "'.concat(t.name,'" ').concat(o,"."),"success")):"added"===o&&j.showNotification("Unable to add project. Name might be invalid.","error")}})),s&&s.addEventListener("change",(t=>{const[e,o]=t.target.value.split("_");n={field:e,direction:o},c()})),j.elements.projectsListUL.addEventListener("click",(d=>{const a=d.target.closest("li[data-project-id]");if(!a)return;const u=a.dataset.projectId;if(d.target.classList.contains("edit-project-btn")){const t=p.getProjectById(u);t&&j.openProjectModal(t)}else if(d.target.classList.contains("delete-project-btn")){const t=p.getProjectById(u);if(t&&confirm('You will permanently delete project "'.concat(t.name,'" and all its tasks.'))){const t=p.removeProject(u);t.success?(j.showNotification('Project "'.concat(t.removedProjectName,'" deleted.'),"success"),l(),c()):"last_project"===t.error?j.showNotification("Unable to delete the last project.","error"):j.showNotification("Unable to delete project.","error")}}else if(d.target.closest(".project-name")||d.target===a){var m;(null===(m=p.getCurrentProject())||void 0===m?void 0:m.id)!==u&&(p.setCurrentProject(u),l(),t="",r&&(r.value=""),e="all",i&&(i.value="all"),o=null,n={field:"dueDate",direction:"asc"},s&&(s.value="dueDate_asc"),o=null,c())}})),j.elements.addTodoBtn.addEventListener("click",(()=>{const t=p.getCurrentProject();t?j.openTodoModal(null,t.id):j.showNotification("Please select project to add task.","warning")})),j.elements.closeTodoModalBtn.addEventListener("click",(()=>{j.closeTodoModal()})),j.elements.todoForm.addEventListener("submit",(t=>{t.preventDefault();const e=j.getTodoFormData();if(e){let t=!1;e.id?p.updateTodoInProject(e.currentProjectId,e.id,e)&&(t=!0):p.addTodoToProject(e.currentProjectId,e)&&(t=!0),t?(c(),j.closeTodoModal(),j.showNotification(e.id?"Task updated.":"Task added.","success")):j.showNotification("Unable to update task.","error")}})),j.elements.todosListUL.addEventListener("click",(t=>{const e=t.target,o=e.closest("li[data-todo-id]");if(!o)return;const n=o.dataset.todoId;let r=o.dataset.originalProjectId;if(!r){const t=p.getCurrentProject();t&&(r=t.id)}if(n&&r)if(e.classList.contains("delete-todo-btn")){const t=p.getProjectById(r).getTodoById(n);confirm('You will permanently delete task "'.concat(t.title,'".'))&&(p.removeTodoFromProject(r,n),j.showNotification("Task deleted.","success"),c())}else if(e.classList.contains("edit-todo-btn")){var i;const t=null===(i=p.getProjectById(r))||void 0===i?void 0:i.getTodoById(n);t&&j.openTodoModal(t,r)}else e.classList.contains("todo-checkbox")&&(p.toggleTodoComplete(r,n),c())})),window.addEventListener("click",(t=>{t.target===j.elements.projectModal&&j.closeProjectModal(),t.target===j.elements.todoModal&&j.closeTodoModal()})),p.getCurrentProject())c();else if(p.getAllProjects().length>0){const t=p.getAllProjects()[0];p.setCurrentProject(t.id),l(),c()}else j.updateProjectTitle("Add a project"),j.renderTodos(null);function l(){const t=p.getAllProjects(),e=p.getCurrentProject();j.renderProjects(t,e?e.id:null)}j.initializeUI(),l(),c()}))}},function(t){t.O(0,[471],(function(){return t(t.s=280)})),t.O()}]);
//# sourceMappingURL=main.a0e05bf6ea1fb304758a.js.map