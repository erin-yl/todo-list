{"version":3,"file":"main.c368dc2ae6c86414a662.js","mappings":"0GA+FA,MA7FA,MACEA,WAAAA,CACEC,EACAC,EACAC,EACAC,GAGA,IAFAC,EAAIC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GACPG,EAASH,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAQT,GANAI,KAAKC,GAAK,QAAHC,OAAWC,KAAKC,MAAK,KAAAF,OAAIG,KAAKC,SAASC,SAAS,IAAIC,MAAM,EAAG,KACpER,KAAKT,MAAQA,EACbS,KAAKR,YAAcA,EAGnBQ,KAAKP,QAAU,KACXA,aAAmBU,OAASM,MAAMhB,EAAQiB,WAE5CV,KAAKP,QAAUA,OACV,GAAuB,iBAAZA,GAA2C,KAAnBA,EAAQkB,OAAe,CAE/D,MAAMC,EAAa,IAAIT,KAAKV,EAAQkB,QACpCX,KAAKP,QAAWgB,MAAMG,EAAWF,WAA0B,KAAbE,CAChD,MACEZ,KAAKP,QAAU,KAGjBO,KAAKN,SAAWA,EAChBM,KAAKL,KAAOkB,MAAMC,QAAQnB,GAAQA,EAAO,GACzCK,KAAKD,UAAYA,CACnB,CAEAgB,cAAAA,GACEf,KAAKD,WAAaC,KAAKD,SACzB,CAEAiB,aAAAA,CAAcC,GAIZ,QAHsBnB,IAAlBmB,EAAQ1B,QAAqBS,KAAKT,MAAQ0B,EAAQ1B,YAC1BO,IAAxBmB,EAAQzB,cAA2BQ,KAAKR,YAAcyB,EAAQzB,kBAE1CM,IAApBmB,EAAQxB,QACV,GAAIwB,EAAQxB,mBAAmBU,OAASM,MAAMQ,EAAQxB,QAAQiB,WAC5DV,KAAKP,QAAUwB,EAAQxB,aAClB,GAA+B,iBAApBwB,EAAQxB,SAAmD,KAA3BwB,EAAQxB,QAAQkB,OAAe,CAC/E,MAAMC,EAAa,IAAIT,KAAKc,EAAQxB,QAAQkB,QAC5CX,KAAKP,QAAWgB,MAAMG,EAAWF,WAA0B,KAAbE,CAChD,MACEZ,KAAKP,QAAU,KAIfwB,EAAQvB,UACN,CAAC,MAAO,SAAU,QAAQwB,SAASD,EAAQvB,YAC7CM,KAAKN,SAAWuB,EAAQvB,UAIxBuB,EAAQtB,MAAQkB,MAAMC,QAAQG,EAAQtB,MACxCK,KAAKL,KAAOsB,EAAQtB,KACjBwB,KAAKC,GAAQA,EAAIT,SACjBU,QAAQD,GAAQA,EAAIvB,OAAS,SACAC,IAAvBmB,EAAQK,YACjBtB,KAAKuB,kBAAkBN,EAAQK,WAEnC,CAEAE,MAAAA,CAAOJ,GACL,MAAMK,EAAaL,EAAIT,OACnBc,IAAezB,KAAKL,KAAKuB,SAASO,IACpCzB,KAAKL,KAAK+B,KAAKD,EAEnB,CAEAE,SAAAA,CAAUC,GACR,MAAMC,EAAqBD,EAAYjB,OACvCX,KAAKL,KAAOK,KAAKL,KAAK0B,QAAQD,GAAQA,IAAQS,GAChD,CAGAC,aAAAA,GACE,OAAO9B,KAAKL,KAAKoC,KAAK,KACxB,CAGAR,iBAAAA,CAAkBD,GACU,iBAAfA,IACTtB,KAAKL,KAAO2B,EACTU,MAAM,KACNb,KAAKC,GAAQA,EAAIT,SACjBU,QAAQD,GAAQA,EAAIvB,OAAS,IAEpC,GCnCF,EArDA,MACEP,WAAAA,CAAY2C,GACVjC,KAAKC,GAAK,WAAHC,OAAcC,KAAKC,MAAK,KAAAF,OAAIG,KAAKC,SAASC,SAAS,IAAIC,MAAM,EAAG,KACvER,KAAKiC,KAAOA,EACZjC,KAAKkC,MAAQ,EACf,CAEAC,OAAAA,CAAQC,GACN,OAAMA,aAAoBC,IACtBrC,KAAKkC,MAAMI,MAAMC,GAASA,EAAKtC,KAAOmC,EAASnC,OAEnDD,KAAKkC,MAAMR,KAAKU,IACT,EACT,CAEAI,UAAAA,CAAWC,GACTzC,KAAKkC,MAAQlC,KAAKkC,MAAMb,QAAQkB,GAASA,EAAKtC,KAAOwC,GACvD,CAEAC,WAAAA,CAAYD,GACV,OAAOzC,KAAKkC,MAAMS,MAAMJ,GAASA,EAAKtC,KAAOwC,GAC/C,CAEAG,WAAAA,GACE,MAAO,IAAI5C,KAAKkC,MAClB,CAEAW,kBAAAA,CAAmBC,GACjB,OAAO9C,KAAKkC,MAAMb,QAAQkB,GAASA,EAAK7C,WAAaoD,GACvD,CAEAC,oBAAAA,CAAqBC,GACnB,OAAOhD,KAAKkC,MAAMb,QAAQkB,GAASA,EAAKxC,YAAciD,GACxD,CAEAC,aAAAA,CAAc7B,GACZ,MAAMK,EAAaL,EAAIT,OAAOuC,cAC9B,OAAKzB,EAEEzB,KAAKkC,MAAMb,QAAQkB,GACxBA,EAAK5C,KAAK2C,MAAMa,GAAMA,EAAED,gBAAkBzB,MAHpBzB,KAAK4C,aAK/B,CAEAQ,aAAAA,GACE,MAAMC,EAAU,IAAIC,IAIpB,OAHAtD,KAAKkC,MAAMqB,SAAShB,IAClBA,EAAK5C,KAAK4D,SAASnC,GAAQiC,EAAQG,IAAIpC,EAAIT,SAAQ,IAE9CE,MAAM4C,KAAKJ,GAASK,MAC7B,GCpDF,MAAMC,EAAc,kBAmCpB,MAhCY,SAAUC,GAElB,IACE,MAAMC,EAAiBC,KAAKC,UAAUH,GACtCI,aAAaC,QAAQN,EAAaE,EACpC,CAAE,MAAOK,GACPC,QAAQD,MAAM,qCAAsCA,EACtD,CACF,EAwBF,EAtBY,WACR,IACE,MAAML,EAAiBG,aAAaI,QAAQT,GAC5C,GAAuB,OAAnBE,EACF,OAEF,OAAOC,KAAKO,MAAMR,EACpB,CAAE,MAAOK,GAEP,YADAC,QAAQD,MAAM,wCAAyCA,EAEzD,CACF,E,0gCCnBF,MAAMI,EAAW,MACf,IAAIC,EAAW,GACXC,EAAiB,KAmDrB,SAASC,IACPC,EAAiBH,EACnB,CA6CA,SAASI,EAAeC,GACtB,OAAOL,EAAS5B,MAAMkC,GAAMA,EAAE5E,KAAO2E,GACvC,CA+EA,SAASE,IACP,OAAOP,EAASQ,QACd,CAACC,EAAKC,IAAYD,EAAI9E,OAAO+E,EAAQrC,gBACrC,GAEJ,CAwEA,MAAMsC,EAAgB,CAAE,KAAQ,EAAG,OAAU,EAAG,IAAO,GAsCvD,OA7PA,WACE,MAAMC,EAAaT,IACfS,GAAcA,EAAWtF,OAAS,GACpC0E,EAA6BY,EAzCVhE,KAAKiE,IACxB,MAAMH,EAAU,IAAII,EAAQD,EAAanD,MAczC,OAbAgD,EAAQhF,GAAKmF,EAAanF,GAC1BgF,EAAQ/C,MAAQkD,EAAalD,MAAMf,KAAKmE,IACtC,MAAM/C,EAAO,IAAIF,EACfiD,EAAU/F,MACV+F,EAAU9F,YACV8F,EAAU7F,QACV6F,EAAU5F,SACV4F,EAAU3F,MAAQ,GAClB2F,EAAUvF,WAGZ,OADAwC,EAAKtC,GAAKqF,EAAUrF,GACbsC,CAAI,IAEN0C,CAAO,IA2BdT,EAAiBD,EAAS,IAAM,MAvBpC,WACE,MAAMgB,EAAc,IAAIF,EAAQ,QAChCE,EAAYpD,QAAQ,IAAIE,EAAK,mBAAoB,qDAAsD,IAAIlC,KAAK,KAAM,EAAG,IAAK,OAAQ,CAAC,WAAW,IAClJoF,EAAYpD,QAAQ,IAAIE,EAAK,oBAAqB,uDAAwD,IAAIlC,KAAK,KAAM,EAAG,GAAI,SAAU,CAAC,YAAY,IACvJoF,EAAYpD,QAAQ,IAAIE,EAAK,mBAAoB,yCAA0C,GAAI,SAAU,CAAC,WAAW,IAErH,MAAMmD,EAAkB,IAAIH,EAAQ,YACpCG,EAAgBrD,QAAQ,IAAIE,EAAK,mBAAoB,+BAAgC,IAAIlC,KAAK,KAAM,EAAG,IAAK,MAAO,CAAC,OAAQ,aAAa,IACzIqF,EAAgBrD,QAAQ,IAAIE,EAAK,0BAA2B,mBAAoB,IAAIlC,KAAK,KAAM,EAAG,IAAK,OAAQ,CAAC,WAAW,IAE3H,MAAMsF,EAAkB,IAAIJ,EAAQ,YACpCI,EAAgBtD,QAAQ,IAAIE,EAAK,oBAAqB,kCAAmC,IAAIlC,KAAK,KAAM,EAAG,IAAK,SAAU,CAAC,QAAQ,IACnIsF,EAAgBtD,QAAQ,IAAIE,EAAK,kCAAmC,cAAe,GAAI,MAAO,CAAC,UAAW,QAAQ,IAElHkC,EAAW,CAACgB,EAAaC,EAAiBC,GAC1CjB,EAAiBe,EACjBd,GACF,CAQIiB,EAEJ,CAmPAC,GAEO,CACLC,WA/OF,SAAoB3D,GAClB,GACEA,IACCsC,EAAS5B,MAAMkC,GAAMA,EAAE5C,KAAKiB,gBAAkBjB,EAAKiB,gBACpD,CACA,MAAM2C,EAAa,IAAIR,EAAQpD,GAG/B,OAFAsC,EAAS7C,KAAKmE,GACdpB,IACOoB,CACT,CACA,OAAO,IACT,EAqOEC,cAnOF,SAAuBlB,EAAWmB,GAChC,MAAMC,EAAkBrB,EAAeC,GACvC,OAAKoB,EAGDzB,EAASjC,MAAKuC,GAAKA,EAAE5E,KAAO2E,GAAaC,EAAE5C,KAAKiB,gBAAkB6C,EAAQ7C,gBACrE,CAAEgB,MAAO,YAAae,QAASe,IAExCA,EAAgB/D,KAAO8D,EACvBtB,IACOuB,GAPE,IAQX,EAyNEC,cAvNF,SAAuBrB,GACrB,MAAMsB,EAAe3B,EAAS4B,WAAUtB,GAAKA,EAAE5E,KAAO2E,IACtD,GAAIsB,GAAgB,EAAG,CACrB,GAAwB,IAApB3B,EAAS1E,OACX,MAAO,CAAEqE,MAAO,gBAElB,MAAMkC,EAAiB7B,EAAS8B,OAAOH,EAAc,GAAG,GAKxD,OAJI1B,GAAkBA,EAAevE,KAAO2E,IAC1CJ,EAAiBD,EAAS1E,OAAS,EAAI0E,EAAS,GAAK,MAEvDE,IACO,CAAE6B,SAAS,EAAMC,mBAAoBH,EAAenE,KAAMuE,kBAAmBhC,EACtF,CACA,MAAO,CAAEN,MAAO,YAClB,EA0MES,iBACA8B,eArMF,WACE,MAAO,IAAIlC,EACb,EAoMEmC,kBA9LF,SAA2B9B,GACzB,MAAMK,EAAUN,EAAeC,GAC/B,QAAIK,IACFT,EAAiBS,GACV,EAGX,EAwLE0B,kBAnMF,WACE,OAAOnC,CACT,EAkMEoC,iBAtLF,SAA0BhC,EAAWiC,GACnC,MAAM5B,EAAUN,EAAeC,GAC/B,GAAIK,EAAS,CACX,MAAM,MAAE1F,EAAK,YAAEC,EAAW,QAAEC,EAAO,SAAEC,EAAQ,WAAE4B,GAAeuF,EACxDC,EAAU,IAAIzE,EAAK9C,EAAOC,EAAaC,EAASC,GAMtD,OALI4B,GACFwF,EAAQvF,kBAAkBD,GAE5B2D,EAAQ9C,QAAQ2E,GAChBrC,IACOqC,CACT,CACA,OAAO,IACT,EA0KEC,sBAxKF,SAA+BnC,EAAWnC,GACxC,MAAMwC,EAAUN,EAAeC,GAC/B,QAAIK,IACFA,EAAQzC,WAAWC,GACnBgC,KACO,EAGX,EAiKEuC,oBA/JF,SAA6BpC,EAAWnC,EAAQwE,GAC9C,MAAMhC,EAAUN,EAAeC,GAC/B,GAAIK,EAAS,CACX,MAAM1C,EAAO0C,EAAQvC,YAAYD,GACjC,GAAIF,EAAM,CACR,QAAkCzC,IAA9BmH,EAAe3F,WAA0B,CAC3CiB,EAAKhB,kBAAkB0F,EAAe3F,YAGtC,MAAM,WAAEA,GAAgC2F,EAAjBC,E,6WAAYC,CAAKF,EAAcG,GACtD7E,EAAKvB,cAAckG,EACrB,MACE3E,EAAKvB,cAAciG,GAGrB,OADAxC,IACOlC,CACT,CACF,CACA,OAAO,IACT,EA6IE8E,mBA3IF,SAA4BzC,EAAWnC,GACrC,MAAMwC,EAAUN,EAAeC,GAC/B,GAAIK,EAAS,CACX,MAAM1C,EAAO0C,EAAQvC,YAAYD,GACjC,GAAIF,EAGF,OAFAA,EAAKxB,iBACL0D,IACOlC,CAEX,CACA,OAAO,IACT,EAiIEuC,yBACAwC,wBAzHF,WACE,MAAMC,EAA0B,GAUhC,OATAhD,EAAShB,SAAQ0B,IACfA,EAAQrC,cAAcW,SAAQhB,IAC5BgF,EAAwB7F,KAAI8F,EAAAA,EAAC,CAAC,EACzBjF,GAAI,IACPkF,kBAAmBxC,EAAQhF,GAC3ByH,YAAazC,EAAQhD,OACrB,GACF,IAEGsF,CACT,EA8GEI,kBA5GF,SAA2BC,GACzB,IAAKA,EAAkB,MAAO,GAE9B,MAAMC,GAAaC,EAAAA,EAAAA,IAAWzD,EAAAA,EAAAA,IAAMuD,EAAkB,aAAc,IAAIzH,OACxE,GAAIM,MAAMoH,EAAWnH,WAAY,MAAO,GAExC,MAAMqH,EAA0B,GAchC,OAbAxD,EAAShB,SAAQ0B,IACbA,EAAQrC,cAAcW,SAAQhB,IACtBA,EAAK9C,UACDuI,EAAAA,EAAAA,IAAQF,EAAAA,EAAAA,GAAWvF,EAAK9C,SAAUoI,IAClCE,EAAwBrG,KAAI8F,EAAAA,EAAC,CAAC,EACvBjF,GAAI,IACPkF,kBAAmBxC,EAAQhF,GAC3ByH,YAAazC,EAAQhD,OAGjC,GACF,IAEC8F,CACX,EAwFIE,kBAtFF,SAA2B/F,EAAOgG,GAChC,IAAKA,GAAoC,KAAtBA,EAAWvH,OAC5B,OAAOuB,EAET,MAAMiG,EAAkBD,EAAWhF,cACnC,OAAOhB,EAAMb,QAAOkB,GAClBA,EAAKhD,MAAM2D,cAAchC,SAASiH,IAClC5F,EAAK/C,YAAY0D,cAAchC,SAASiH,IAE5C,EA8EEC,sBA5EF,WACE,MAAM/E,EAAU,IAAIC,IAIpB,OAHAiB,EAAShB,SAAS0B,IAChBA,EAAQ7B,gBAAgBG,SAASnC,GAAQiC,EAAQG,IAAIpC,IAAK,IAErDP,MAAM4C,KAAKJ,GAASK,MAC7B,EAuEE2E,+BArEF,SAAwCjH,GACtC,MAAMkH,EAAWxD,IACXrD,EAAaL,EAAIT,OAAOuC,cAC9B,OAAKzB,EACE6G,EAASjH,QAAQkB,GACtBA,EAAK5C,KAAK2C,MAAMa,GAAMA,EAAED,gBAAkBzB,MAFpB6G,CAI1B,EA+DEC,oCA7DF,SAA6CzF,GAE3C,OADiBgC,IACDzD,QAAQkB,GAASA,EAAK7C,WAAaoD,GACrD,EA2DE0F,UAvDF,SAAmBtG,EAAOuG,GAAkC,IAAvBC,EAAa9I,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,MACnD,MAAM+I,EAAS,IAAIzG,GA8BnB,OA5BAyG,EAAOjF,MAAK,CAACkF,EAAGC,KACd,IAAIC,EAAMC,EAEV,OAAQN,GACN,IAAK,UAEH,GAAkB,OAAdG,EAAEnJ,SAAkC,OAAdoJ,EAAEpJ,QAAkB,OAAO,EACrD,GAAkB,OAAdmJ,EAAEnJ,QAAkB,OAAO,EAC/B,GAAkB,OAAdoJ,EAAEpJ,QAAkB,OAAQ,EAChCqJ,EAAOF,EAAEnJ,QACTsJ,EAAOF,EAAEpJ,QACT,MACF,IAAK,WACHqJ,EAAO5D,EAAc0D,EAAElJ,UACvBqJ,EAAO7D,EAAc2D,EAAEnJ,UACvB,MACF,QACE,OAAO,EAGX,IAAIsJ,EAAa,EAMjB,OALIF,EAAOC,EACTC,EAAa,EACJF,EAAOC,IAChBC,GAAc,GAES,SAAlBN,GAAyC,EAAdM,EAAkBA,CAAU,IAEzDL,CACT,EAyBD,EA7TgB,GA+TjB,Q,iBClUA,MAAMM,EAAgB,MAEpB,MAAMC,EAAiBC,SAASC,eAAe,iBACzCC,EAAgBF,SAASC,eAAe,mBACxCE,EAAsBH,SAASC,eAAe,yBAC9CG,EAAaJ,SAASC,eAAe,gBACrCI,EAAcL,SAASC,eAAe,cACtCK,EAAgBN,SAASC,eAAe,mBACxCM,EAAoBP,SAASC,eAAe,wBAC5CO,EAAmBR,SAASC,eAAe,qBAG3CQ,EAAeT,SAASC,eAAe,iBACvCS,EAAcV,SAASC,eAAe,gBACtCU,EAAiBX,SAASC,eAAe,cACzCW,EAAmBZ,SAASC,eAAe,sBAC3CY,EAAiBb,SAASC,eAAe,oBACzCa,EAAuBd,SAASC,eAAe,uBAG/Cc,EAAYf,SAASC,eAAe,cACpCe,EAAWhB,SAASC,eAAe,aACnCgB,EAAcjB,SAASC,eAAe,WACtCiB,EAAiBlB,SAASC,eAAe,oBACzCkB,EAAuBnB,SAASC,eAAe,0BAE/CmB,EAAmBpB,SAASC,eAAe,sBAC3CoB,EAAoBrB,SAASC,eAAe,uBAC5CqB,EAAgBtB,SAASC,eAAe,mBACxCsB,EAAoBvB,SAASC,eAAe,oBAGlD,SAASuB,EAAaC,GACpB,KAAOA,EAAQC,YACbD,EAAQE,YAAYF,EAAQC,WAEhC,CA4DA,SAASE,EAAmBxL,GAC1B+J,EAAoB0B,YAAczL,GAAS,qBAC7C,CA+NA,SAAS0L,EAAgBC,GACvBA,EAAYC,iBAAiB,OAAO5H,SAAQ6H,IAC1C,MAAMC,EAAQD,EAAeE,cAAc,eACrCC,EAAWH,EAAeE,cAAc,iBACxCE,EAAYJ,EAAeE,cAAc,kBAE3CD,IACFA,EAAMI,UAAUC,OAAO,cACvBL,EAAMM,kBAAkB,KAEtBH,IACFA,EAAUR,YAAc,GACxBQ,EAAUI,MAAMC,QAAU,QAExBN,IACFA,EAASK,MAAMC,QAAU,QAC3B,GAEJ,CAEA,SAASC,EAAeC,EAAcC,GACpC,MAAMZ,EAAiBW,EAAaE,cAC9BV,EAAWH,EAAeE,cAAc,iBACxCE,EAAYJ,EAAeE,cAAc,kBAE/CS,EAAaN,UAAUjI,IAAI,cAC3BuI,EAAaJ,kBAAkBK,GAE3BR,IACFA,EAAUR,YAAcgB,EACxBR,EAAUI,MAAMC,QAAU,SAExBN,IACFA,EAASK,MAAMC,QAAU,OAE7B,CAyDA,MAAO,CACLK,eAhXF,SAAwB3H,EAAU4H,GAEhC,GADAxB,EAAazB,IACR3E,GAAgC,IAApBA,EAAS1E,OAAc,CACtC,MAAMuM,EAAOjD,SAASkD,cAAc,QAGpC,OAFAD,EAAKpB,YAAc,wBACnB9B,EAAeoD,YAAYF,EAE7B,CAEA7H,EAAShB,SAAS0B,IAChB,MAAMsH,EAAKpD,SAASkD,cAAc,MAClCE,EAAGC,QAAQ5H,UAAYK,EAAQhF,GAE/B,MAAMwM,EAAWtD,SAASkD,cAAc,QACxCI,EAAShB,UAAUjI,IAAI,gBACvBiJ,EAASzB,YAAc/F,EAAQhD,KAC/BsK,EAAGD,YAAYG,GAEf,MAAMC,EAAavD,SAASkD,cAAc,OAC1CK,EAAWjB,UAAUjI,IAAI,mBAEzB,MAAMmJ,EAAUxD,SAASkD,cAAc,UACvCM,EAAQlB,UAAUjI,IAAI,oBACtBmJ,EAAQC,UAAY,2DACpBD,EAAQpN,MAAQ,eAChBmN,EAAWJ,YAAYK,GAEvB,MAAME,EAAW1D,SAASkD,cAAc,MACxCQ,EAASpB,UAAUjI,IAAI,oBAEvB,MAAMsJ,EAAS3D,SAASkD,cAAc,MACtCS,EAAO9B,YAAc,OACrB8B,EAAOrB,UAAUjI,IAAI,gBACrBqJ,EAASP,YAAYQ,GAErB,MAAMC,EAAW5D,SAASkD,cAAc,MACxCU,EAAS/B,YAAc,SACvB+B,EAAStB,UAAUjI,IAAI,kBACvBqJ,EAASP,YAAYS,GAErBL,EAAWJ,YAAYO,GACvBN,EAAGD,YAAYI,GAEXzH,EAAQhF,KAAOkM,GACjBI,EAAGd,UAAUjI,IAAI,UAEnB0F,EAAeoD,YAAYC,EAAG,GAElC,EAiUES,YA1TF,SAAqBC,GACnBtC,EAAanB,GAEb,MAAM0D,EAAiBD,IAAoE,IAA1CA,EAAuBC,eAClEhL,EAAQ+K,EAAyBA,EAAuB/K,MAAQ,GAKtE,GAFA6I,EAFoBkC,EAAyBA,EAAuBhL,KAAO,qBAItEC,GAA0B,IAAjBA,EAAMrC,OAAc,CAChC,MAAMgF,EAAIsE,SAASkD,cAAc,KAUjC,OARExH,EAAEmG,YADAkC,EACc,uCACPD,EACO,gCAEA,gDAElBzD,EAAY8C,YAAYzH,EAG1B,CAEA3C,EAAMqB,SAAQhB,IACZ,MAAMgK,EAAKpD,SAASkD,cAAc,MAClCE,EAAGC,QAAQ/J,OAASF,EAAKtC,GAErBiN,GAAkB3K,EAAKkF,oBACzB8E,EAAGC,QAAQ/E,kBAAoBlF,EAAKkF,mBAElClF,EAAKxC,WACPwM,EAAGd,UAAUjI,IAAI,kBAGnB,MAAM2J,EAAqBhE,SAASkD,cAAc,OAClDc,EAAmB1B,UAAUjI,IAAI,wBAEjC,MAAM4J,EAAWjE,SAASkD,cAAc,SACxCe,EAASC,KAAO,WAChBD,EAASE,QAAU/K,EAAKxC,UACxBqN,EAAS3B,UAAUjI,IAAI,iBACvB4J,EAASZ,QAAQ/J,OAASF,EAAKtC,GAE/B,MAAMsN,EAAcpE,SAASkD,cAAc,OAC3CkB,EAAY9B,UAAUjI,IAAI,aAE1B,MAAMgK,EAAYrE,SAASkD,cAAc,QACzCmB,EAAU/B,UAAUjI,IAAI,cACxBgK,EAAUxC,YAAczI,EAAKhD,MAE7B,MAAMkO,EAActE,SAASkD,cAAc,QAjH/C,IAA8BqB,EAkH1BD,EAAYhC,UAAUjI,IAAI,iBAC1BiK,EAAYzC,YAAc,QAAH9K,QAnHGwN,EAmH6BnL,EAAK9C,mBAlH1CU,OAAQwN,EAAAA,EAAAA,GAAYD,IAC/BE,EAAAA,EAAAA,IAAOF,EAAM,gBAEf,eAiHL,MAAMG,EAAe1E,SAASkD,cAAc,QAC5CwB,EAAapC,UAAUjI,IAAI,iBAAkB,YAAFtD,OAAcqC,EAAK7C,WAC9D,MAAMoO,EAAevL,EAAK7C,SAASqO,OAAO,GAAGC,cAAgBzL,EAAK7C,SAASc,MAAM,GASjF,GARAqN,EAAa7C,YAAc,GAAH9K,OAAM4N,GAE9BP,EAAYjB,YAAYc,GACxBG,EAAYjB,YAAYkB,GACxBD,EAAYjB,YAAYmB,GACxBF,EAAYjB,YAAYuB,GAGpBX,GAAkB3K,EAAKmF,YAAa,CACtC,MAAMuG,EAAmB9E,SAASkD,cAAc,QAChD4B,EAAiBxC,UAAUjI,IAAI,sBAC/ByK,EAAiBjD,YAAc,YAAH9K,OAAeqC,EAAKmF,aAChD6F,EAAYjB,YAAY2B,EAC1B,CAEA,MAAMvB,EAAavD,SAASkD,cAAc,OAC1CK,EAAWjB,UAAUjI,IAAI,gBAEzB,MAAM0K,EAAY/E,SAASkD,cAAc,UACzC6B,EAAUzC,UAAUjI,IAAI,mBACxB0K,EAAUtB,UAAY,oEACtBsB,EAAU3O,MAAQ,eAClBmN,EAAWJ,YAAY4B,GAEvB,MAAMvB,EAAUxD,SAASkD,cAAc,UACvCM,EAAQlB,UAAUjI,IAAI,oBACtBmJ,EAAQC,UAAY,2DACpBD,EAAQpN,MAAQ,eAChBmN,EAAWJ,YAAYK,GAEvB,MAAME,EAAW1D,SAASkD,cAAc,MACxCQ,EAASpB,UAAUjI,IAAI,oBAEvB,MAAMsJ,EAAS3D,SAASkD,cAAc,MACtCS,EAAO9B,YAAc,OACrB8B,EAAOrB,UAAUjI,IAAI,aACrBqJ,EAASP,YAAYQ,GAErB,MAAMC,EAAW5D,SAASkD,cAAc,MACxCU,EAAS/B,YAAc,SACvB+B,EAAStB,UAAUjI,IAAI,eACvBqJ,EAASP,YAAYS,GAErBL,EAAWJ,YAAYO,GAEvBM,EAAmBb,YAAYiB,GAC/BJ,EAAmBb,YAAYI,GAC/BH,EAAGD,YAAYa,GAEf,MAAMgB,EAAiBhF,SAASkD,cAAc,OAC9C8B,EAAe1C,UAAUjI,IAAI,oBAAqB,UAElD,MAAM4K,EAAejF,SAASkD,cAAc,KAC5C+B,EAAaxB,UAAY,gBACzB,MAAMyB,EAAkBlF,SAASmF,eAAe/L,EAAK/C,aAAe,kBAKpE,GAJA4O,EAAa9B,YAAY+B,GACzBF,EAAe7B,YAAY8B,GAGvB7L,EAAK5C,MAAQ4C,EAAK5C,KAAKE,OAAS,EAAG,CACrC,MAAM0O,EAAUpF,SAASkD,cAAc,OACvCkC,EAAQ9C,UAAUjI,IAAI,qBACtBjB,EAAK5C,KAAK4D,SAASnC,IACjB,MAAMoN,EAAUrF,SAASkD,cAAc,QACvCmC,EAAQ/C,UAAUjI,IAAI,aACtBgL,EAAQxD,YAAc5J,EACtBmN,EAAQjC,YAAYkC,EAAQ,IAE9BL,EAAe7B,YAAYiC,EAC7B,CAEAhC,EAAGD,YAAY6B,GACf3E,EAAY8C,YAAYC,EAAG,GAE/B,EAwLExB,qBACA0D,iBAtLF,WAAgD,IAAtBC,EAAa9O,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,KACxCqL,EAAgBpB,GAChBA,EAAY8E,QACZ7E,EAAe8E,MAAQ,GACvB5E,EAAegB,YAAc,OAEzB0D,IACF5E,EAAe8E,MAAQF,EAAczO,GACrC8J,EAAiB6E,MAAQF,EAAczM,MAEzC2H,EAAa6B,UAAUjI,IAAI,QAC3BuG,EAAiB8E,OACnB,EA2KEC,kBAzKF,WACElF,EAAa6B,UAAUC,OAAO,OAChC,EAwKEqD,cAtKF,WAA4D,IAArCC,EAAUpP,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,KAAMuM,EAAgBvM,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACxDmL,EAAgBd,GAChBA,EAASwE,QACTvE,EAAYwE,MAAQ,GAEhBI,IACF5E,EAAYwE,MAAQI,EAAW/O,GAC/BoK,EAAeuE,MAAQI,EAAWzP,MAClC+K,EAAqBsE,MAAQI,EAAWxP,YACxC+K,EAAiBqE,MAASI,EAAWvP,UAAWkO,EAAAA,EAAAA,GAAYqB,EAAWvP,UACnEmO,EAAAA,EAAAA,IAAOoB,EAAWvP,QAAS,cAC3B,GACJ+K,EAAkBoE,MAAQI,EAAWtP,SACrC+K,EAAcmE,MAAQI,EAAWrP,KAAOqP,EAAWlN,gBAAkB,IAEvEqI,EAASqC,QAAQL,iBAAmBA,EACpCjC,EAAUuB,UAAUjI,IAAI,QACxB6G,EAAewE,OACjB,EAqJEI,eAnJF,WACE/E,EAAUuB,UAAUC,OAAO,OAC7B,EAkJEwD,mBA/IF,WACEjE,EAAgBpB,GAChB,IAAIsF,GAAU,EACd,MAAMlN,EAAO8H,EAAiB6E,MAAMjO,OAC9BV,EAAK6J,EAAe8E,MAM1B,OAJI7E,EAAiBqF,SAASC,eAC5BvD,EAAe/B,EAAkB,6BACjCoF,GAAU,GAELA,EAAU,CAAElP,KAAIgC,QAAS,IAClC,EAqIEqN,gBAnIF,WACErE,EAAgBd,GAChB,IAAIgF,GAAU,EACd,MAAM5P,EAAQ8K,EAAeuE,MAAMjO,OAC7BnB,EAAc8K,EAAqBsE,MAAMjO,OACzClB,EAAU8K,EAAiBqE,MAC3BlP,EAAW8K,EAAkBoE,MAC7BtN,EAAamJ,EAAcmE,MAAMjO,OACjCV,EAAKmK,EAAYwE,MACjBzC,EAAmBhC,EAASqC,QAAQL,iBAO1C,OALI9B,EAAe+E,SAASC,eAC1BvD,EAAezB,EAAgB,0BAC/B8E,GAAU,GAGLA,EACH,CACAlP,KACAV,QACAC,cACAC,UACAC,WACA4B,aACA6K,oBAEA,IACN,EAyGExB,eACA4E,iBAlEF,SAA0BvD,GACxB,MAAMwD,EAAerG,SAASkD,cAAc,OAC5CmD,EAAa/D,UAAUjI,IAAI,gBAC3BgM,EAAaxE,YAAcgB,EAE3BrC,EAAiB2C,YAAYkD,GAG7BA,EAAaC,iBAAiB,gBAAiBC,IACrB,wBAApBA,EAAEC,eACJH,EAAa9D,QACf,GAEJ,EAsDEkE,eApDF,SAAwBjQ,EAAMkQ,GAC5B,GAAKpG,EAAL,CAGA,GAFAkB,EAAalB,GAET9J,GAAQA,EAAKE,OAAS,EACxBF,EAAK4D,SAAQnC,IACX,MAAM0O,EAAa3G,SAASkD,cAAc,QAC1CyD,EAAWrE,UAAUjI,IAAI,mBACzBsM,EAAW9E,YAAc5J,EACzB0O,EAAWtD,QAAQpL,IAAMA,EACrBA,IAAQyO,GACVC,EAAWrE,UAAUjI,IAAI,UAE3BiG,EAAc6C,YAAYwD,EAAW,QAElC,CACL,MAAMC,EAAY5G,SAASkD,cAAc,QACzC0D,EAAU/E,YAAc,mCACxB+E,EAAUnE,MAAMoE,SAAW,WAC3BvG,EAAc6C,YAAYyD,EAC5B,CAEIrG,IACFA,EAAkBkC,MAAMC,QAAUgE,EAAY,SAAW,QAEvDnG,IAAsBD,EAAcwG,SAASvG,IAAsB/J,EAAKE,OAAS,GACnF4J,EAAc6C,YAAY5C,EAzBF,CA2B5B,EAyBEwG,aAtBF,WACEnF,EAAmB,uBACnBJ,EAAanB,GACb,MAAM+C,EAAKpD,SAASkD,cAAc,MAClCE,EAAGvB,YAAc,6CACjBxB,EAAY8C,YAAYC,GACxBhD,EAAWqC,MAAMC,QAAU,MAC7B,EAgBEsE,SAAU,CACRvG,eACAM,YACAhB,iBACAM,cACAH,gBACAE,aACAM,cACAM,WACAF,uBACAS,oBACAhB,qBAGL,EAzbqB,GA2btB,QC1bAP,SAASsG,iBAAiB,oBAAoB,KAAM,IAAAW,EAClD,IAAIC,EAAoB,GACpBC,EAAwB,MACxBC,EAAmB,KACnBC,EAAsB,CAAEC,MAAO,UAAWC,UAAW,OACrDC,EAAuB,KAE3B,MAAMC,EAAczH,SAASC,eAAe,sBACtCyH,EAAuB1H,SAASC,eAAe,mBAC/CK,EAAgBN,SAASC,eAAe,mBACxCM,EAAoBP,SAASC,eAAe,wBAC5C0H,EAAkB3H,SAASC,eAAe,cAC1C2H,EAAqB5H,SAASC,eAAe,yBAC7C4H,EAAqB7H,SAASC,eAAe,yBAC7C6H,EAAoB9H,SAASC,eAAe,wBAiBlD,SAAS8H,IACP,IAAIC,EAAiB,GACjBC,EAAY,GACZC,GAAe,EACnB,MAAMC,EAA4BhN,EAASqC,oBAG3C,GAAIgK,EACFS,EAAY,gBAAHlR,QAAmBqR,EAAAA,EAAAA,IAAc,IAAIpR,KAAKwQ,EAAuB,aAAc,iBACxFQ,EAAiB7M,EAASqD,kBAAkBgJ,GAC5CU,GAAe,EACXL,IAAoBA,EAAmBpF,MAAMC,QAAU,SAEvD+E,IAAaA,EAAYhC,MAAQ,IACrCyB,EAAoB,GAEpBmB,EAAoB,WAGf,GAAInB,GAAkD,KAA7BA,EAAkB1P,OAAe,CAC/DyQ,EAAY,uBAAHlR,OAA0BmQ,EAAiB,KACpD,MAAM9I,EAA0BjD,EAASgD,0BACzC6J,EAAiB7M,EAAS2D,kBAAkBV,EAAyB8I,GACrEgB,GAAe,EACXL,IAAoBA,EAAmBpF,MAAMC,QAAU,QAE3D2F,EAAoB,KAGtB,MAAO,GAAIF,EAA2B,CACpC,MAAMG,EAAcnN,EAASK,eAAe2M,EAA0BrR,IACtEkR,EAAiBM,EAAcA,EAAY7O,cAAgB,GAC3DwO,EAAYK,EAAcA,EAAYxP,KAAO,oBAC7CuP,EAAoBF,EAA0BrR,IAC1C+Q,IAAoBA,EAAmBpF,MAAMC,QAAU,QAC3D2F,EAAoBF,EAA0BrR,GAGhD,MACEmR,EAAY,oCACZD,EAAiB,GACjBE,GAAe,EACXL,IAAoBA,EAAmBpF,MAAMC,QAAU,QAC3D2F,EAAoB,OA1DxB,WAA+C,IAAtBH,EAAYzR,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAC/B8R,EAAe,GACnB,MAAMlN,EAAiBF,EAASqC,oBAEhC,GAAI0K,EACFK,EAAepN,EAAS8D,6BACnB,GAAI5D,EAAgB,CACzB,MAAMiN,EAAcnN,EAASK,eAAeH,EAAevE,IAC3DyR,EAAeD,EAAcA,EAAYrO,gBAAkB,EAC7D,MACEsO,EAAepN,EAAS8D,wBAE1Ba,EAAc2G,eAAe8B,EAAcnB,EAC7C,CAgDEoB,CAAgBN,IAAiBC,GAEjC,IAAIM,EAAgB,IAAIT,GAKxB,GAJ8B,QAA1Bb,IACFsB,EAAgBA,EAAcvQ,QAAOkB,GAAQA,EAAK7C,WAAa4Q,KAG7DC,EAAkB,CACpB,MAAMsB,EAAiBtB,EAAiBrN,cACxC0O,EAAgBA,EAAcvQ,QAAOkB,GACnCA,EAAK5C,KAAK2C,MAAKa,GAAKA,EAAED,gBAAkB2O,KAE5C,CAIA,MAAMC,EAAa,CACjB7P,KAAMmP,EACNlP,MAJgBoC,EAASkE,UAAUoJ,EAAepB,EAAoBC,MAAOD,EAAoBE,WAKjGxD,eAAgBmE,GAGlBpI,EAAc+D,YAAY8E,GAC1B7I,EAAc8B,mBAAmBqG,GACjCnI,EAAckH,SAAS5G,WAAWqC,MAAMC,QAAUyF,EAA4B,QAAU,MAC1F,CA0EA,SAASS,IAAwC,IAAtBC,EAAapS,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,KACzCuJ,SAASgC,iBAAiB,6BAA6B5H,SAAQsJ,IACzDA,IAAamF,GACfnF,EAASpB,UAAUC,OAAO,UAC5B,GAEJ,CAqPA,GAnUIqF,GACFA,EAAmBtB,iBAAiB,UAAWC,IAC7CiB,EAAuBjB,EAAEuC,OAAOrD,MAChCyB,EAAoB,GAChBO,IAAaA,EAAYhC,MAAQ,IACrCsC,GAAsB,IAItBF,GACFA,EAAmBvB,iBAAiB,SAAS,KAC3CkB,EAAuB,KACnBI,IAAoBA,EAAmBnC,MAAQ,IACnDoC,EAAmBpF,MAAMC,QAAU,OACnCqF,GAAsB,IAItBD,GACFA,EAAkBxB,iBAAiB,SAAS,KAC1C,MAAMyC,GAAQX,EAAAA,EAAAA,KAAcY,EAAAA,EAAAA,GAAc,IAAIhS,MAAS,cACvDwQ,EAAuBuB,EACnBnB,IAAoBA,EAAmBnC,MAAQsD,GACnD7B,EAAoB,GAChBO,IAAaA,EAAYhC,MAAQ,IACrCsC,GAAsB,IAItBN,GACFA,EAAYnB,iBAAiB,SAAUC,IACrCW,EAAoBX,EAAEuC,OAAOrD,MACI,KAA7ByB,EAAkB1P,SACpBgQ,EAAuB,KACnBI,IAAoBA,EAAmBnC,MAAQ,IAC/CoC,IAAoBA,EAAmBpF,MAAMC,QAAU,SAE7DqF,GAAsB,IAItBL,GACFA,EAAqBpB,iBAAiB,UAAWC,IAC/CY,EAAwBZ,EAAEuC,OAAOrD,MACjCsC,GAAsB,IAItBzH,GACFA,EAAcgG,iBAAiB,SAAUC,IACvC,GAAIA,EAAEuC,OAAOxG,UAAUwE,SAAS,mBAAoB,CAClD,MAAMmC,EAAa1C,EAAEuC,OAAOzF,QAAQpL,IAElCmP,EADEA,IAAqB6B,EACJ,KAEAA,EAErBlB,GACF,KAIAxH,GACFA,EAAkB+F,iBAAiB,SAAS,KACjB,OAArBc,IACFA,EAAmB,KACnBW,IACF,IAcJjI,EAAckH,SAAS9G,cAAcoG,iBAAiB,SAAS,KAC7DxG,EAAcwF,kBAAkB,IAGlCxF,EAAckH,SAASlG,qBAAqBwF,iBAAiB,SAAS,KACpExG,EAAc6F,mBAAmB,IAInC7F,EAAckH,SAAStG,YAAY4F,iBAAiB,UAAWC,IAC7DA,EAAE2C,iBACF,MAAMZ,EAAcxI,EAAciG,qBAClC,GAAIuC,EAAa,CACf,IAAIa,EACAC,EAAS,QACb,GAAId,EAAYxR,IAGd,GAFAqS,EAAShO,EAASwB,cAAc2L,EAAYxR,GAAIwR,EAAYxP,MAC5DsQ,EAAS,UACLD,GAA2B,cAAjBA,EAAOpO,MAEnB,YADA+E,EAAcsG,iBAAiB,iBAADrP,OAAkBuR,EAAYxP,KAAI,0BAIlEqQ,EAAShO,EAASsB,WAAW6L,EAAYxP,MAGvCqQ,IAAWA,EAAOpO,OACL,UAAXqO,GAAoBjO,EAASoC,kBAAkB4L,EAAOrS,IAC1DuR,IACAN,IACAjI,EAAc6F,oBACd7F,EAAcsG,iBAAiB,YAADrP,OAAaoS,EAAOrQ,KAAI,MAAA/B,OAAKqS,KACvC,UAAXA,GACTtJ,EAAcsG,iBAAiB,wBAEnC,KAGEuB,GACFA,EAAgBrB,iBAAiB,UAAWC,IAC1C,MAAOe,EAAOC,GAAahB,EAAEuC,OAAOrD,MAAM5M,MAAM,KAChDwO,EAAsB,CAAEC,QAAOC,aAC/BQ,GAAsB,IAI1B/H,SAASsG,iBAAiB,SAAUC,IAE7BA,EAAEuC,OAAOO,QAAQ,sBAAyB9C,EAAEuC,OAAOO,QAAQ,sBAC9DT,GACF,IAIF9I,EAAckH,SAASjH,eAAeuG,iBAAiB,SAAUC,IAC/D,MAAM+C,EAAY/C,EAAEuC,OAAOO,QAAQ,uBACnC,IAAKC,EAAW,OAEhB,MAAM7N,EAAY6N,EAAUjG,QAAQ5H,UACpC,GAAI8K,EAAEuC,OAAOO,QAAQ,qBAAsB,CACzC9C,EAAEgD,kBACF,MAAM7F,EAAW6C,EAAEuC,OAAOO,QAAQ,qBAAqBG,mBACvD,GAAI9F,GAAYA,EAASpB,UAAUwE,SAAS,oBAAqB,CAC/D,MAAM2C,EAAY/F,EAASpB,UAAUwE,SAAS,WAC9C8B,EAAkBlF,GACb+F,EAIHH,EAAU7G,MAAMiH,OAAS,IAHzBhG,EAASpB,UAAUjI,IAAI,WACvBiP,EAAU7G,MAAMiH,OAAS,IAI7B,CACF,MAAO,GAAInD,EAAEuC,OAAOO,QAAQ,iBAAkB,CAC5CT,IACA,MAAMrD,EAAgBpK,EAASK,eAAeC,GAC1C8J,GACFzF,EAAcwF,iBAAiBC,EAEnC,MAAO,GAAIgB,EAAEuC,OAAOO,QAAQ,mBAAoB,CAC9CT,IACA,MAAMe,EAAkBxO,EAASK,eAAeC,GAChD,GAAIkO,GAAmBC,QAAQ,wCAAD7S,OAAyC4S,EAAgB7Q,KAAI,yBAAyB,CAClH,MAAMqQ,EAAShO,EAAS2B,cAAcrB,GAClC0N,EAAOhM,SACT2C,EAAcsG,iBAAiB,YAADrP,OAAaoS,EAAO/L,mBAAkB,cACpEiL,IAEAN,KAC0B,iBAAjBoB,EAAOpO,MAChB+E,EAAcsG,iBAAiB,qCAE/BtG,EAAcsG,iBAAiB,2BAEnC,CACF,MAAO,IAAIG,EAAEuC,OAAOO,QAAQ,kBAAoB9C,EAAEuC,SAAWQ,KAEtD/C,EAAEuC,OAAOO,QAAQ,uBAAyB9C,EAAEuC,OAAOO,QAAQ,qBAAsB,KAAAQ,EACpFjB,MAEsD,QAA/BiB,EAAG1O,EAASqC,2BAAmB,IAAAqM,OAAA,EAA5BA,EAA8B/S,MAC9B2E,GAAa+L,GAAwBN,KAC7D/L,EAASoC,kBAAkB9B,GAC3ByL,EAAoB,GAEhBO,IAAaA,EAAYhC,MAAQ,IACrC0B,EAAwB,MACpBO,IAAsBA,EAAqBjC,MAAQ,OACvD2B,EAAmB,KACnBC,EAAsB,CAAEC,MAAO,UAAWC,UAAW,OACjDI,IAAiBA,EAAgBlC,MAAQ,eAC7C+B,EAAuB,KACnBI,IAAoBA,EAAmBnC,MAAQ,IAC/CoC,IAAoBA,EAAmBpF,MAAMC,QAAU,QAC3DqF,IAEJ,CACF,IAIFjI,EAAckH,SAAS5G,WAAWkG,iBAAiB,SAAS,KAC1D,MAAMjL,EAAiBF,EAASqC,oBAC5BnC,EACFyE,EAAc8F,cAAc,KAAMvK,EAAevE,IAEjDgJ,EAAcsG,iBAAiB,oCACjC,IAGFtG,EAAckH,SAASzF,kBAAkB+E,iBAAiB,SAAS,KACjExG,EAAcgG,gBAAgB,IAIhChG,EAAckH,SAAShG,SAASsF,iBAAiB,UAAWC,IAC1DA,EAAE2C,iBACF,MAAMY,EAAWhK,EAAcqG,kBAC/B,GAAI2D,EAAU,CACZ,IAAI3M,GAAU,EACV2M,EAAShT,GACPqE,EAAS0C,oBAAoBiM,EAAS9G,iBAAkB8G,EAAShT,GAAIgT,KACvE3M,GAAU,GAGRhC,EAASsC,iBAAiBqM,EAAS9G,iBAAkB8G,KACvD3M,GAAU,GAIVA,GACF4K,IACAjI,EAAcgG,iBACdhG,EAAcsG,iBAAiB0D,EAAShT,GAAK,eAAiB,eAE9DgJ,EAAcsG,iBAAiB,wBAEnC,KAIFtG,EAAckH,SAAS3G,YAAYiG,iBAAiB,SAAUC,IAAM,IAAAwD,EAClE,MAAMjB,EAASvC,EAAEuC,OACXkB,EAASlB,EAAOO,QAAQ,oBAC9B,IAAKW,EAAQ,OAEb,MAAM1Q,EAAS0Q,EAAO3G,QAAQ/J,OAC9B,IAAI2Q,EAAqBD,EAAO3G,QAAQ/E,oBAAiD,QAAhCyL,EAAI5O,EAASqC,2BAAmB,IAAAuM,OAAA,EAA5BA,EAA8BjT,IAE3F,GAAKwC,GAAW2Q,EAEhB,GAAInB,EAAOO,QAAQ,qBAAsB,CACvC9C,EAAEgD,kBACF,MAAM7F,EAAWoF,EAAOO,QAAQ,qBAAqBG,mBACrD,GAAI9F,GAAYA,EAASpB,UAAUwE,SAAS,oBAAqB,CAC/D,MAAM2C,EAAY/F,EAASpB,UAAUwE,SAAS,WAC9C8B,EAAkBlF,GACb+F,EAIHO,EAAOvH,MAAMiH,OAAS,IAHtBhG,EAASpB,UAAUjI,IAAI,WACvB2P,EAAOvH,MAAMiH,OAAS,IAI1B,CAEF,MAAO,GAAIZ,EAAOO,QAAQ,gBAAiB,CACzCT,IACA,MACMsB,EADU/O,EAASK,eAAeyO,GACX1Q,YAAYD,GACrCsQ,QAAQ,qCAAD7S,OAAsCmT,EAAa9T,MAAK,SACjE+E,EAASyC,sBAAsBqM,EAAoB3Q,GACnDwG,EAAcsG,iBAAiB,gBAC/B2B,IAGJ,MAAO,GAAIe,EAAOO,QAAQ,cAAe,KAAAc,EACvCvB,IACA,MAAM/C,EAC+B,QADrBsE,EAAGhP,EAChBK,eAAeyO,UAAmB,IAAAE,OAAA,EADlBA,EAEf5Q,YAAYD,GACZuM,GACF/F,EAAc8F,cAAcC,EAAYoE,EAG5C,MAAO,GAAInB,EAAOO,QAAQ,kBACxBT,IACAzN,EAAS+C,mBAAmB+L,EAAoB3Q,GAChDyO,SAEK,GAAIe,EAAOO,QAAQ,oBAAqB,CAC7CT,IACA,MAAMwB,EAAMtB,EAAOO,QAAQ,oBACrBgB,EAAaL,EAAO7H,cAAc,sBACpCkI,IACeA,EAAW/H,UAAUwE,SAAS,WAE7CuD,EAAW/H,UAAUC,OAAO,UAC5B8H,EAAW/H,UAAUjI,IAAI,WACzB+P,EAAI3G,UAAY,kEAChB2G,EAAIhU,MAAQ,eACZ4T,EAAO1H,UAAUjI,IAAI,sBAErBgQ,EAAW/H,UAAUjI,IAAI,UACzBgQ,EAAW/H,UAAUC,OAAO,WAC5B6H,EAAI3G,UAAY,oEAChB2G,EAAIhU,MAAQ,eACZ4T,EAAO1H,UAAUC,OAAO,qBAG9B,KAIF+H,OAAOhE,iBAAiB,SAAUC,IAC5BA,EAAEuC,SAAWhJ,EAAckH,SAASvG,cACtCX,EAAc6F,oBAEZY,EAAEuC,SAAWhJ,EAAckH,SAASjG,WACtCjB,EAAcgG,gBAChB,IAIE3K,EAASqC,oBACXuK,SACK,GAAI5M,EAASmC,iBAAiB5G,OAAS,EAAG,CAE/C,MAAM6T,EAAepP,EAASmC,iBAAiB,GAC/CnC,EAASoC,kBAAkBgN,EAAazT,IACxCuR,IACAN,GACF,MACEjI,EAAc8B,mBAAmB,iBACjC9B,EAAc+D,YAAY,MAI5B,SAASwE,IAA6C,IAAzBrF,EAAgBvM,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,KAC9C,MAAM2E,EAAWD,EAASmC,iBAC1BwC,EAAciD,eAAe3H,EAAU4H,EACzC,CAGAlD,EAAciH,eACdsB,EAAgD,QAA7BpB,EAAC9L,EAASqC,2BAAmB,IAAAyJ,OAAA,EAA5BA,EAA8BnQ,IAGlD,MAAM0T,GAAepC,EAAAA,EAAAA,KAAcY,EAAAA,EAAAA,GAAc,IAAIhS,MAAS,cAC9DwQ,EAAuBgD,EACnB5C,IAAoBA,EAAmBnC,MAAQ+E,GAC/C3C,IAAoBA,EAAmBpF,MAAMC,QAAU,SAE3DqF,GAAsB,G","sources":["webpack://todo-list/./src/todo.js","webpack://todo-list/./src/project.js","webpack://todo-list/./src/storage.js","webpack://todo-list/./src/appLogic.js","webpack://todo-list/./src/domController.js","webpack://todo-list/./src/index.js"],"sourcesContent":["// Todo item module that manages todo objects\n\nclass Todo {\n  constructor(\n    title,\n    description,\n    dueDate,\n    priority,\n    tags = [],\n    completed = false,\n  ) {\n    this.id = `todo-${Date.now()}-${Math.random().toString(36).slice(2, 11)}`; // Unique ID\n    this.title = title;\n    this.description = description;\n\n    // Standardize dueDate to be a Date object or null\n    this.dueDate = null;\n    if (dueDate instanceof Date && !isNaN(dueDate.valueOf())) {\n      // For sample data using Date objects\n      this.dueDate = dueDate;\n    } else if (typeof dueDate === 'string' && dueDate.trim() !== '') {\n      // For HTML form inputs\n      const parsedDate = new Date(dueDate.trim());\n      this.dueDate = !isNaN(parsedDate.valueOf()) ? parsedDate : null;\n    } else {\n      this.dueDate = null;\n    }\n\n    this.priority = priority;\n    this.tags = Array.isArray(tags) ? tags : [];\n    this.completed = completed;\n  }\n\n  toggleComplete() {\n    this.completed = !this.completed;\n  }\n\n  updateDetails(details) {\n    if (details.title !== undefined) this.title = details.title;\n    if (details.description !== undefined) this.description = details.description;\n\n    if (details.dueDate !== undefined) {\n      if (details.dueDate instanceof Date && !isNaN(details.dueDate.valueOf())) {\n        this.dueDate = details.dueDate;\n      } else if (typeof details.dueDate === 'string' && details.dueDate.trim() !== '') {\n        const parsedDate = new Date(details.dueDate.trim());\n        this.dueDate = !isNaN(parsedDate.valueOf()) ? parsedDate : null;\n      } else {\n        this.dueDate = null;\n      }\n    }\n\n    if (details.priority) {\n      if (['low', 'medium', 'high'].includes(details.priority)) {\n        this.priority = details.priority;\n      }\n    }\n\n    if (details.tags && Array.isArray(details.tags)) {\n      this.tags = details.tags\n        .map((tag) => tag.trim())\n        .filter((tag) => tag.length > 0);\n    } else if (details.tagsString !== undefined) {\n      this.setTagsFromString(details.tagsString);\n    }\n  }\n\n  addTag(tag) {\n    const trimmedTag = tag.trim();\n    if (trimmedTag && !this.tags.includes(trimmedTag)) {\n      this.tags.push(trimmedTag);\n    }\n  }\n\n  removeTag(tagToRemove) {\n    const trimmedTagToRemove = tagToRemove.trim();\n    this.tags = this.tags.filter((tag) => tag !== trimmedTagToRemove);\n  }\n\n  // Helper to get a string representation of tags\n  getTagsString() {\n    return this.tags.join(', ');\n  }\n\n  // Helper to set tags from a comma-separated string\n  setTagsFromString(tagsString) {\n    if (typeof tagsString === 'string') {\n      this.tags = tagsString\n        .split(',')\n        .map((tag) => tag.trim())\n        .filter((tag) => tag.length > 0);\n    }\n  }\n}\n\nexport default Todo;","// Project module that manages a collection of todo items\n\nimport Todo from './todo.js';\n\nclass Project {\n  constructor(name) {\n    this.id = `project-${Date.now()}-${Math.random().toString(36).slice(2, 11)}`; // Unique ID\n    this.name = name;\n    this.todos = [];\n  }\n\n  addTodo(todoItem) {\n    if (!(todoItem instanceof Todo)) return false;\n    if (this.todos.some((todo) => todo.id === todoItem.id)) return false;\n\n    this.todos.push(todoItem);\n    return true;\n  }\n\n  removeTodo(todoId) {\n    this.todos = this.todos.filter((todo) => todo.id !== todoId);\n  }\n\n  getTodoById(todoId) {\n    return this.todos.find((todo) => todo.id === todoId);\n  }\n\n  getAllTodos() {\n    return [...this.todos]; // Return a copy to prevent direct modification\n  }\n\n  getTodosByPriority(priorityLevel) {\n    return this.todos.filter((todo) => todo.priority === priorityLevel);\n  }\n\n  getTodosByCompletion(completionStatus) {\n    return this.todos.filter((todo) => todo.completed === completionStatus);\n  }\n\n  getTodosByTag(tag) {\n    const trimmedTag = tag.trim().toLowerCase();\n    if (!trimmedTag) return this.getAllTodos(); // Return all todos if tag is empty\n\n    return this.todos.filter((todo) =>\n      todo.tags.some((t) => t.toLowerCase() === trimmedTag),\n    );\n  }\n\n  getUniqueTags() {\n    const allTags = new Set();\n    this.todos.forEach((todo) => {\n      todo.tags.forEach((tag) => allTags.add(tag.trim()));\n    });\n    return Array.from(allTags).sort();\n  }\n}\n\nexport default Project;","// Storage module that uses localStorage mechanism\n\nconst STORAGE_KEY = 'todoAppProjects';\n\nconst storage = {\n  saveData: function (data) {\n    // Save project objects\n    try {\n      const serializedData = JSON.stringify(data);\n      localStorage.setItem(STORAGE_KEY, serializedData);\n    } catch (error) {\n      console.error('Error saving data to localStorage:', error);\n    }\n  },\n\n  loadData: function () {\n    try {\n      const serializedData = localStorage.getItem(STORAGE_KEY);\n      if (serializedData === null) {\n        return undefined;\n      }\n      return JSON.parse(serializedData);\n    } catch (error) {\n      console.error('Error loading data from localStorage:', error);\n      return undefined;\n    }\n  },\n\n  clearData: function () {\n    try {\n      localStorage.removeItem(STORAGE_KEY);\n    } catch (error) {\n      console.error('Error clearing data from localStorage:', error);\n    }\n  },\n};\n\nexport default storage;\n","// App controller module that handles the core logic\n\nimport Project from './project.js';\nimport Todo from './todo.js';\nimport storage from './storage.js';\nimport { parse, isEqual, startOfDay } from 'date-fns';\n\nconst appLogic = (() => {\n  let projects = [];\n  let currentProject = null;\n\n  function rehydrateProjects(plainProjects) {\n    return plainProjects.map((plainProject) => {\n      const project = new Project(plainProject.name);\n      project.id = plainProject.id;\n      project.todos = plainProject.todos.map((plainTodo) => {\n        const todo = new Todo(\n          plainTodo.title,\n          plainTodo.description,\n          plainTodo.dueDate,\n          plainTodo.priority,\n          plainTodo.tags || [],\n          plainTodo.completed,\n        );\n        todo.id = plainTodo.id;\n        return todo;\n      });\n      return project;\n    });\n  }\n\n  function createSampleData() {\n    const workProject = new Project('Work');\n    workProject.addTodo(new Todo('Finish Q2 report', 'Compile required data and finalize the conclusion.', new Date(2025, 6, 26), 'high', ['report'], false));\n    workProject.addTodo(new Todo('Team meeting prep', `Prepare agenda and slides for Monday's team meeting.`, new Date(2025, 7, 6), 'medium', ['meeting'], false));\n    workProject.addTodo(new Todo('Client follow-up', 'Call John Doe regarding project Alpha.', '', 'medium', ['client'], true));\n\n    const personalProject = new Project('Personal');\n    personalProject.addTodo(new Todo('Grocery shopping', 'Milk, eggs, chicken, fruits.', new Date(2025, 6, 20), 'low', ['home', 'shopping'], false));\n    personalProject.addTodo(new Todo('Book doctor appointment', 'Annual check-up.', new Date(2025, 7, 10), 'high', ['health'], false));\n\n    const learningProject = new Project('Learning');\n    learningProject.addTodo(new Todo('Webpack Deep Dive', 'Understand loaders and plugins.', new Date(2025, 6, 30), 'medium', ['dev'], true));\n    learningProject.addTodo(new Todo('Read \"The Pragmatic Programmer\"', 'Chapter 3-5', '', 'low', ['reading', 'dev'], false));\n\n    projects = [workProject, personalProject, learningProject];\n    currentProject = workProject;\n    saveProjects();\n  }\n\n  function loadProjects() {\n    const loadedData = storage.loadData();\n    if (loadedData && loadedData.length > 0) {\n      projects = rehydrateProjects(loadedData);\n      currentProject = projects[0] || null;\n    } else {\n      createSampleData();\n    }\n  }\n\n  function saveProjects() {\n    storage.saveData(projects);\n  }\n\n  // Project management\n  function addProject(name) {\n    if (\n      name &&\n      !projects.find((p) => p.name.toLowerCase() === name.toLowerCase())\n    ) {\n      const newProject = new Project(name);\n      projects.push(newProject);\n      saveProjects();\n      return newProject;\n    }\n    return null;\n  }\n\n  function updateProject(projectId, newName) {\n    const projectToUpdate = getProjectById(projectId);\n    if (!projectToUpdate) {\n      return null;\n    }\n    if (projects.some(p => p.id !== projectId && p.name.toLowerCase() === newName.toLowerCase())) {\n      return { error: 'duplicate', project: projectToUpdate };\n    }\n    projectToUpdate.name = newName;\n    saveProjects();\n    return projectToUpdate;\n  }\n\n  function removeProject(projectId) {\n    const projectIndex = projects.findIndex(p => p.id === projectId);\n    if (projectIndex > -1) {\n      if (projects.length === 1) {\n        return { error: 'last_project' };\n      }\n      const removedProject = projects.splice(projectIndex, 1)[0];\n      if (currentProject && currentProject.id === projectId) {\n        currentProject = projects.length > 0 ? projects[0] : null;\n      }\n      saveProjects();\n      return { success: true, removedProjectName: removedProject.name, newCurrentProject: currentProject };\n    }\n    return { error: 'not_found' };\n  }\n\n  function getProjectById(projectId) {\n    return projects.find((p) => p.id === projectId);\n  }\n\n  function getAllProjects() {\n    return [...projects];\n  }\n\n  function getCurrentProject() {\n    return currentProject;\n  }\n\n  function setCurrentProject(projectId) {\n    const project = getProjectById(projectId);\n    if (project) {\n      currentProject = project;\n      return true;\n    }\n    return false;\n  }\n\n  // To-do management\n  function addTodoToProject(projectId, todoDetails) {\n    const project = getProjectById(projectId);\n    if (project) {\n      const { title, description, dueDate, priority, tagsString } = todoDetails;\n      const newTodo = new Todo(title, description, dueDate, priority);\n      if (tagsString) {\n        newTodo.setTagsFromString(tagsString);\n      }\n      project.addTodo(newTodo);\n      saveProjects();\n      return newTodo;\n    }\n    return null;\n  }\n\n  function removeTodoFromProject(projectId, todoId) {\n    const project = getProjectById(projectId);\n    if (project) {\n      project.removeTodo(todoId);\n      saveProjects();\n      return true;\n    }\n    return false;\n  }\n\n  function updateTodoInProject(projectId, todoId, updatedDetails) {\n    const project = getProjectById(projectId);\n    if (project) {\n      const todo = project.getTodoById(todoId);\n      if (todo) {\n        if (updatedDetails.tagsString !== undefined) {\n          todo.setTagsFromString(updatedDetails.tagsString);\n          // Avoid passing tagsString since todo.updateDetails expects tags as an array\n          // eslint-disable-next-line no-unused-vars\n          const { tagsString, ...otherDetails } = updatedDetails;\n          todo.updateDetails(otherDetails);\n        } else {\n          todo.updateDetails(updatedDetails);\n        }\n        saveProjects();\n        return todo;\n      }\n    }\n    return null;\n  }\n\n  function toggleTodoComplete(projectId, todoId) {\n    const project = getProjectById(projectId);\n    if (project) {\n      const todo = project.getTodoById(todoId);\n      if (todo) {\n        todo.toggleComplete();\n        saveProjects();\n        return todo;\n      }\n    }\n    return null;\n  }\n\n  function getTodosAcrossProjects() {\n    return projects.reduce(\n      (acc, project) => acc.concat(project.getAllTodos()),\n      [],\n    );\n  }\n\n  function getTodosWithProjectInfo() {\n    const allTodosWithProjectInfo = [];\n    projects.forEach(project => {\n      project.getAllTodos().forEach(todo => {\n        allTodosWithProjectInfo.push({\n          ...todo,\n          originalProjectId: project.id,\n          projectName: project.name\n        });\n      });\n    });\n    return allTodosWithProjectInfo;\n  }\n\n  function getTodosDueOnDate(targetDateString) {\n    if (!targetDateString) return [];\n\n    const targetDate = startOfDay(parse(targetDateString, 'yyyy-MM-dd', new Date()));\n    if (isNaN(targetDate.valueOf())) return [];\n\n    const dueTodosWithProjectInfo = [];\n    projects.forEach(project => {\n        project.getAllTodos().forEach(todo => {\n            if (todo.dueDate) { // todo.dueDate is a Date object or null\n                if (isEqual(startOfDay(todo.dueDate), targetDate)) {\n                    dueTodosWithProjectInfo.push({\n                        ...todo,\n                        originalProjectId: project.id,\n                        projectName: project.name\n                    });\n                }\n            }\n        });\n    });\n    return dueTodosWithProjectInfo;\n}\n\n  function searchTodosInList(todos, searchTerm) {\n    if (!searchTerm || searchTerm.trim() === '') {\n      return todos;\n    }\n    const lowerSearchTerm = searchTerm.toLowerCase();\n    return todos.filter(todo =>\n      todo.title.toLowerCase().includes(lowerSearchTerm) ||\n      todo.description.toLowerCase().includes(lowerSearchTerm)\n    );\n  }\n\n  function getTagsAcrossProjects() {\n    const allTags = new Set();\n    projects.forEach((project) => {\n      project.getUniqueTags().forEach((tag) => allTags.add(tag));\n    });\n    return Array.from(allTags).sort();\n  }\n\n  function filterTodosByTagAcrossProjects(tag) {\n    const allTodos = getTodosAcrossProjects();\n    const trimmedTag = tag.trim().toLowerCase();\n    if (!trimmedTag) return allTodos;\n    return allTodos.filter((todo) =>\n      todo.tags.some((t) => t.toLowerCase() === trimmedTag),\n    );\n  }\n\n  function filterTodosByPriorityAcrossProjects(priorityLevel) {\n    const allTodos = getTodosAcrossProjects();\n    return allTodos.filter((todo) => todo.priority === priorityLevel);\n  }\n\n  const priorityOrder = { 'high': 1, 'medium': 2, 'low': 3 };\n\n  function sortTodos(todos, sortField, sortDirection = 'asc') {\n    const sorted = [...todos];\n\n    sorted.sort((a, b) => {\n      let valA, valB;\n\n      switch (sortField) {\n        case 'dueDate':\n          // Sort null due dates to the end\n          if (a.dueDate === null && b.dueDate === null) return 0;\n          if (a.dueDate === null) return 1; // a comes after b\n          if (b.dueDate === null) return -1; // a comes before b\n          valA = a.dueDate;\n          valB = b.dueDate;\n          break;\n        case 'priority':\n          valA = priorityOrder[a.priority];\n          valB = priorityOrder[b.priority];\n          break;\n        default:\n          return 0; // No sorting for unknown fields\n      }\n\n      let comparison = 0;\n      if (valA > valB) {\n        comparison = 1;\n      } else if (valA < valB) {\n        comparison = -1;\n      }\n      return sortDirection === 'desc' ? comparison * -1 : comparison;\n    });\n    return sorted;\n  }\n\n  loadProjects();\n\n  return {\n    addProject,\n    updateProject,\n    removeProject,\n    getProjectById,\n    getAllProjects,\n    setCurrentProject,\n    getCurrentProject,\n    addTodoToProject,\n    removeTodoFromProject,\n    updateTodoInProject,\n    toggleTodoComplete,\n    getTodosAcrossProjects,\n    getTodosWithProjectInfo,\n    getTodosDueOnDate,\n    searchTodosInList,\n    getTagsAcrossProjects,\n    filterTodosByTagAcrossProjects,\n    filterTodosByPriorityAcrossProjects,\n    sortTodos,\n  };\n})();\n\nexport default appLogic;","// Display controller module that handles DOM manipulations\n\nimport { format, isValid as isValidDate } from 'date-fns';\n\nconst domController = (() => {\n  // DOM element selectors\n  const projectsListUL = document.getElementById('projects-list');\n  const addProjectBtn = document.getElementById('add-project-btn');\n  const currentProjectTitle = document.getElementById('current-project-title');\n  const addTodoBtn = document.getElementById('add-todo-btn');\n  const todosListUL = document.getElementById('todos-list');\n  const tagFilterArea = document.getElementById('tag-filter-area');\n  const clearTagFilterBtn = document.getElementById('clear-tag-filter-btn');\n  const notificationArea = document.getElementById('notification-area');\n\n  // Project modal\n  const projectModal = document.getElementById('project-modal');\n  const projectForm = document.getElementById('project-form');\n  const projectIdInput = document.getElementById('project-id'); // Hidden input for project editing\n  const projectNameInput = document.getElementById('project-name-input');\n  const saveProjectBtn = document.getElementById('save-project-btn');\n  const closeProjectModalBtn = document.getElementById('close-project-modal');\n\n  // Todo modal\n  const todoModal = document.getElementById('todo-modal');\n  const todoForm = document.getElementById('todo-form');\n  const todoIdInput = document.getElementById('todo-id'); // Hidden input for todo editing\n  const todoTitleInput = document.getElementById('todo-title-input');\n  const todoDescriptionInput = document.getElementById('todo-description-input',\n  );\n  const todoDueDateInput = document.getElementById('todo-dueDate-input');\n  const todoPriorityInput = document.getElementById('todo-priority-input');\n  const todoTagsInput = document.getElementById('todo-tags-input');\n  const closeTodoModalBtn = document.getElementById('close-todo-modal');\n\n  // Helper functions to remove all child nodes\n  function clearElement(element) {\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n  }\n\n  function formatDateForDisplay(date) {\n    if (date instanceof Date && isValidDate(date)) { //\n      return format(date, 'MMM dd, yyyy'); //\n    }\n    return 'No date set';\n  }\n\n  // Project rendering\n  function renderProjects(projects, currentProjectId) {\n    clearElement(projectsListUL);\n    if (!projects || projects.length === 0) {\n      const span = document.createElement('span');\n      span.textContent = 'No projects yet.';\n      projectsListUL.appendChild(span);\n      return;\n    }\n\n    projects.forEach((project) => {\n      const li = document.createElement('li');\n      li.dataset.projectId = project.id;\n\n      const nameSpan = document.createElement('span');\n      nameSpan.classList.add('project-name');\n      nameSpan.textContent = project.name;\n      li.appendChild(nameSpan);\n\n      const actionsDiv = document.createElement('div');\n      actionsDiv.classList.add('project-actions');\n\n      const moreBtn = document.createElement('button');\n      moreBtn.classList.add('more-actions-btn');\n      moreBtn.innerHTML = '<span class=\"material-symbols-outlined\">more_vert</span>';\n      moreBtn.title = \"More options\";\n      actionsDiv.appendChild(moreBtn);\n\n      const dropdown = document.createElement('ul');\n      dropdown.classList.add('actions-dropdown');\n      // Edit option\n      const editLi = document.createElement('li');\n      editLi.textContent = 'Edit';\n      editLi.classList.add('edit-project');\n      dropdown.appendChild(editLi);\n      // Delete option\n      const deleteLi = document.createElement('li');\n      deleteLi.textContent = 'Delete';\n      deleteLi.classList.add('delete-project');\n      dropdown.appendChild(deleteLi);\n\n      actionsDiv.appendChild(dropdown);\n      li.appendChild(actionsDiv);\n\n      if (project.id === currentProjectId) {\n        li.classList.add(\"active\");\n      }\n      projectsListUL.appendChild(li);\n    });\n  }\n\n  function updateProjectTitle(title) {\n    currentProjectTitle.textContent = title || 'No project selected';\n  }\n\n  // To-do rendering\n  function renderTodos(projectOrSearchResults) {\n    clearElement(todosListUL);\n\n    const isGlobalSearch = projectOrSearchResults && projectOrSearchResults.isGlobalSearch === true;\n    const todos = projectOrSearchResults ? projectOrSearchResults.todos : [];\n    const displayName = projectOrSearchResults ? projectOrSearchResults.name : 'Select a Project';\n\n    updateProjectTitle(displayName);\n\n    if (!todos || todos.length === 0) {\n      const p = document.createElement('p');\n      if (isGlobalSearch) {\n        p.textContent = 'No tasks found matching your search.';\n      } else if (projectOrSearchResults) {\n        p.textContent = 'No tasks in this project yet.';\n      } else {\n        p.textContent = 'Select a project or enter a search term.';\n      }\n      todosListUL.appendChild(p);\n\n      return;\n    }\n\n    todos.forEach(todo => {\n      const li = document.createElement('li');\n      li.dataset.todoId = todo.id;\n\n      if (isGlobalSearch && todo.originalProjectId) {\n        li.dataset.originalProjectId = todo.originalProjectId;\n      }\n      if (todo.completed) {\n        li.classList.add('todo-completed');\n      }\n\n      const todoPreviewContent = document.createElement('div');\n      todoPreviewContent.classList.add('todo-preview-content');\n\n      const checkbox = document.createElement('input');\n      checkbox.type = 'checkbox';\n      checkbox.checked = todo.completed;\n      checkbox.classList.add('todo-checkbox');\n      checkbox.dataset.todoId = todo.id;\n\n      const todoInfoDiv = document.createElement('div');\n      todoInfoDiv.classList.add('todo-info');\n\n      const titleSpan = document.createElement('span');\n      titleSpan.classList.add('todo-title');\n      titleSpan.textContent = todo.title;\n\n      const dueDateSpan = document.createElement('span');\n      dueDateSpan.classList.add('todo-due-date');\n      dueDateSpan.textContent = `Due: ${formatDateForDisplay(todo.dueDate)}`;\n\n      const prioritySpan = document.createElement('span');\n      prioritySpan.classList.add('priority-label', `priority-${todo.priority}`);\n      const priorityText = todo.priority.charAt(0).toUpperCase() + todo.priority.slice(1);\n      prioritySpan.textContent = `${priorityText}`;\n\n      todoInfoDiv.appendChild(checkbox);\n      todoInfoDiv.appendChild(titleSpan);\n      todoInfoDiv.appendChild(dueDateSpan);\n      todoInfoDiv.appendChild(prioritySpan);\n\n      // Project name display in global search result\n      if (isGlobalSearch && todo.projectName) {\n        const projectLabelSpan = document.createElement('span');\n        projectLabelSpan.classList.add('todo-project-label');\n        projectLabelSpan.textContent = `Project: ${todo.projectName}`;\n        todoInfoDiv.appendChild(projectLabelSpan);\n      }\n\n      const actionsDiv = document.createElement('div');\n      actionsDiv.classList.add('todo-actions');\n\n      const expandBtn = document.createElement('button');\n      expandBtn.classList.add('expand-todo-btn');\n      expandBtn.innerHTML = '<span class=\"material-symbols-outlined\">expand_circle_down</span>';\n      expandBtn.title = 'Show details';\n      actionsDiv.appendChild(expandBtn);\n\n      const moreBtn = document.createElement('button');\n      moreBtn.classList.add('more-actions-btn');\n      moreBtn.innerHTML = '<span class=\"material-symbols-outlined\">more_vert</span>';\n      moreBtn.title = \"More options\";\n      actionsDiv.appendChild(moreBtn);\n\n      const dropdown = document.createElement('ul');\n      dropdown.classList.add('actions-dropdown');\n      // Edit option\n      const editLi = document.createElement('li');\n      editLi.textContent = 'Edit';\n      editLi.classList.add('edit-todo');\n      dropdown.appendChild(editLi);\n      // Delete option\n      const deleteLi = document.createElement('li');\n      deleteLi.textContent = 'Delete';\n      deleteLi.classList.add('delete-todo');\n      dropdown.appendChild(deleteLi);\n\n      actionsDiv.appendChild(dropdown);\n\n      todoPreviewContent.appendChild(todoInfoDiv);\n      todoPreviewContent.appendChild(actionsDiv);\n      li.appendChild(todoPreviewContent);\n\n      const fullDetailsDiv = document.createElement('div');\n      fullDetailsDiv.classList.add('todo-full-details', 'hidden');\n\n      const descriptionP = document.createElement('p');\n      descriptionP.innerHTML = 'Description: ';\n      const descriptionText = document.createTextNode(todo.description || 'No description');\n      descriptionP.appendChild(descriptionText);\n      fullDetailsDiv.appendChild(descriptionP);\n\n      // Tags display\n      if (todo.tags && todo.tags.length > 0) {\n        const tagsDiv = document.createElement('div');\n        tagsDiv.classList.add('todo-tags-display');\n        todo.tags.forEach((tag) => {\n          const tagSpan = document.createElement('span');\n          tagSpan.classList.add('tag-label');\n          tagSpan.textContent = tag;\n          tagsDiv.appendChild(tagSpan);\n        });\n        fullDetailsDiv.appendChild(tagsDiv);\n      }\n\n      li.appendChild(fullDetailsDiv);\n      todosListUL.appendChild(li);\n    });\n  }\n\n  // Modal handling\n  function openProjectModal(projectToEdit = null) {\n    clearFormErrors(projectForm);\n    projectForm.reset();\n    projectIdInput.value = ''; // Clear hidden ID field\n    saveProjectBtn.textContent = 'Save';\n\n    if (projectToEdit) {\n      projectIdInput.value = projectToEdit.id;\n      projectNameInput.value = projectToEdit.name;\n    }\n    projectModal.classList.add('show');\n    projectNameInput.focus();\n  }\n\n  function closeProjectModal() {\n    projectModal.classList.remove('show');\n  }\n\n  function openTodoModal(todoToEdit = null, currentProjectId) {\n    clearFormErrors(todoForm);\n    todoForm.reset();\n    todoIdInput.value = ''; // Clear hidden ID field\n\n    if (todoToEdit) {\n      todoIdInput.value = todoToEdit.id;\n      todoTitleInput.value = todoToEdit.title;\n      todoDescriptionInput.value = todoToEdit.description;\n      todoDueDateInput.value = (todoToEdit.dueDate && isValidDate(todoToEdit.dueDate))\n        ? format(todoToEdit.dueDate, 'yyyy-MM-dd') // Format Date obj for input\n        : ''; // Empty string for null or invalid date\n      todoPriorityInput.value = todoToEdit.priority;\n      todoTagsInput.value = todoToEdit.tags ? todoToEdit.getTagsString() : '';\n    }\n    todoForm.dataset.currentProjectId = currentProjectId;\n    todoModal.classList.add('show');\n    todoTitleInput.focus();\n  }\n\n  function closeTodoModal() {\n    todoModal.classList.remove('show');\n  }\n\n  // Form data getters\n  function getProjectFormData() {\n    clearFormErrors(projectForm);\n    let isValid = true;\n    const name = projectNameInput.value.trim();\n    const id = projectIdInput.value;\n\n    if (projectNameInput.validity.valueMissing) {\n      showFieldError(projectNameInput, 'Project name is required.');\n      isValid = false;\n    }\n    return isValid ? { id, name } : null;\n  }\n\n  function getTodoFormData() {\n    clearFormErrors(todoForm);\n    let isValid = true;\n    const title = todoTitleInput.value.trim();\n    const description = todoDescriptionInput.value.trim();\n    const dueDate = todoDueDateInput.value;\n    const priority = todoPriorityInput.value;\n    const tagsString = todoTagsInput.value.trim(); // Comma-separated string\n    const id = todoIdInput.value;\n    const currentProjectId = todoForm.dataset.currentProjectId;\n\n    if (todoTitleInput.validity.valueMissing) {\n      showFieldError(todoTitleInput, 'Task name is required.');\n      isValid = false;\n    }\n\n    return isValid\n      ? {\n        id,\n        title,\n        description,\n        dueDate,\n        priority,\n        tagsString,\n        currentProjectId\n      }\n      : null;\n  }\n\n  // Form validation\n  function clearFormErrors(formElement) {\n    formElement.querySelectorAll('div').forEach(fieldContainer => {\n      const input = fieldContainer.querySelector('.form-input');\n      const helpSpan = fieldContainer.querySelector('.help-message');\n      const errorSpan = fieldContainer.querySelector('.error-message');\n\n      if (input) {\n        input.classList.remove('is-invalid');\n        input.setCustomValidity('');\n      }\n      if (errorSpan) {\n        errorSpan.textContent = '';\n        errorSpan.style.display = 'none';\n      }\n      if (helpSpan) {\n        helpSpan.style.display = 'block';\n      }\n    });\n  }\n\n  function showFieldError(inputElement, message) {\n    const fieldContainer = inputElement.parentElement;\n    const helpSpan = fieldContainer.querySelector('.help-message');\n    const errorSpan = fieldContainer.querySelector('.error-message');\n\n    inputElement.classList.add('is-invalid');\n    inputElement.setCustomValidity(message);\n\n    if (errorSpan) {\n      errorSpan.textContent = message;\n      errorSpan.style.display = 'block';\n    }\n    if (helpSpan) {\n      helpSpan.style.display = 'none';\n    }\n  }\n\n  function showNotification(message) {\n    const notification = document.createElement('div');\n    notification.classList.add('notification');\n    notification.textContent = message;\n\n    notificationArea.appendChild(notification);\n\n    // Remove notification from DOM after animation completes\n    notification.addEventListener('animationend', (e) => {\n      if (e.animationName === 'fadeOutNotification') {\n        notification.remove();\n      }\n    });\n  }\n\n  function renderTagCloud(tags, activeTag) {\n    if (!tagFilterArea) return;\n    clearElement(tagFilterArea);\n\n    if (tags && tags.length > 0) {\n      tags.forEach(tag => {\n        const tagElement = document.createElement('span');\n        tagElement.classList.add('tag-filter-item');\n        tagElement.textContent = tag;\n        tagElement.dataset.tag = tag;\n        if (tag === activeTag) {\n          tagElement.classList.add('active');\n        }\n        tagFilterArea.appendChild(tagElement);\n      });\n    } else {\n      const noTagsMsg = document.createElement('span');\n      noTagsMsg.textContent = 'No tags available for filtering.';\n      noTagsMsg.style.fontSize = '0.875rem';\n      tagFilterArea.appendChild(noTagsMsg);\n    }\n\n    if (clearTagFilterBtn) {\n      clearTagFilterBtn.style.display = activeTag ? 'inline' : 'none';\n    }\n    if (clearTagFilterBtn && !tagFilterArea.contains(clearTagFilterBtn) && tags.length > 0) {\n      tagFilterArea.appendChild(clearTagFilterBtn);\n    }\n  }\n\n  // Initial state\n  function initializeUI() {\n    updateProjectTitle('Loading projects...');\n    clearElement(todosListUL);\n    const li = document.createElement('li');\n    li.textContent = 'Select or add a project to see your tasks.';\n    todosListUL.appendChild(li);\n    addTodoBtn.style.display = 'none';\n  }\n\n  return {\n    renderProjects,\n    renderTodos,\n    updateProjectTitle,\n    openProjectModal,\n    closeProjectModal,\n    openTodoModal,\n    closeTodoModal,\n    getProjectFormData,\n    getTodoFormData,\n    clearElement,\n    showNotification,\n    renderTagCloud,\n    initializeUI,\n    elements: {\n      projectModal,\n      todoModal,\n      projectsListUL,\n      todosListUL,\n      addProjectBtn,\n      addTodoBtn,\n      projectForm,\n      todoForm,\n      closeProjectModalBtn,\n      closeTodoModalBtn,\n      clearTagFilterBtn,\n    },\n  };\n})();\n\nexport default domController;","import appLogic from './appLogic.js';\nimport domController from './domController.js';\nimport { format as formatDateFns, startOfDay as startOfDayFns } from 'date-fns';\nimport './style.css';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  let currentSearchTerm = '';\n  let currentPriorityFilter = 'all';\n  let currentTagFilter = null;\n  let currentSortCriteria = { field: 'dueDate', direction: 'asc' };\n  let currentDueDateFilter = null;\n\n  const searchInput = document.getElementById('search-todos-input');\n  const priorityFilterSelect = document.getElementById('priority-filter');\n  const tagFilterArea = document.getElementById('tag-filter-area');\n  const clearTagFilterBtn = document.getElementById('clear-tag-filter-btn');\n  const sortTodosSelect = document.getElementById('sort-todos');\n  const dueDateFilterInput = document.getElementById('due-date-filter-input');\n  const clearDateFilterBtn = document.getElementById('clear-date-filter-btn');\n  const showTodayTasksBtn = document.getElementById('show-today-tasks-btn');\n\n  function refreshTagCloud(isGlobalMode = false) {\n    let tagsForCloud = [];\n    const currentProject = appLogic.getCurrentProject();\n\n    if (isGlobalMode) { // True if date filter or global search is active\n      tagsForCloud = appLogic.getTagsAcrossProjects();\n    } else if (currentProject) {\n      const projectData = appLogic.getProjectById(currentProject.id);\n      tagsForCloud = projectData ? projectData.getUniqueTags() : [];\n    } else {\n      tagsForCloud = appLogic.getTagsAcrossProjects();\n    }\n    domController.renderTagCloud(tagsForCloud, currentTagFilter);\n  }\n\n  function updateAndRenderTodos() {\n    let todosToDisplay = [];\n    let viewTitle = '';\n    let isGlobalMode = false;\n    const currentProjectFromSidebar = appLogic.getCurrentProject();\n\n    // Global due date mode\n    if (currentDueDateFilter) {\n      viewTitle = `Tasks due on ${formatDateFns(new Date(currentDueDateFilter + 'T00:00:00'), 'MMM dd, yyyy')}`;\n      todosToDisplay = appLogic.getTodosDueOnDate(currentDueDateFilter);\n      isGlobalMode = true;\n      if (clearDateFilterBtn) clearDateFilterBtn.style.display = 'block';\n      // Clear search when date filter is active\n      if (searchInput) searchInput.value = '';\n      currentSearchTerm = '';\n      // Deselect project in sidebar visually\n      refreshProjectsList(null);\n\n      // Global search mode\n    } else if (currentSearchTerm && currentSearchTerm.trim() !== '') {\n      viewTitle = `Search results for '${currentSearchTerm}'`;\n      const allTodosWithProjectInfo = appLogic.getTodosWithProjectInfo();\n      todosToDisplay = appLogic.searchTodosInList(allTodosWithProjectInfo, currentSearchTerm);\n      isGlobalMode = true;\n      if (clearDateFilterBtn) clearDateFilterBtn.style.display = 'none';\n      // Deselect project in sidebar visually\n      refreshProjectsList(null);\n\n      // Project mode\n    } else if (currentProjectFromSidebar) {\n      const projectData = appLogic.getProjectById(currentProjectFromSidebar.id);\n      todosToDisplay = projectData ? projectData.getAllTodos() : [];\n      viewTitle = projectData ? projectData.name : 'Project not found';\n      refreshProjectsList(currentProjectFromSidebar.id);\n      if (clearDateFilterBtn) clearDateFilterBtn.style.display = 'none';\n      refreshProjectsList(currentProjectFromSidebar.id);\n\n      // Default or no selection\n    } else {\n      viewTitle = 'Select a date, project, or search';\n      todosToDisplay = [];\n      isGlobalMode = false;\n      if (clearDateFilterBtn) clearDateFilterBtn.style.display = 'none';\n      refreshProjectsList(null);\n    }\n\n    refreshTagCloud(isGlobalMode || !currentProjectFromSidebar);\n\n    let filteredTodos = [...todosToDisplay];\n    if (currentPriorityFilter !== 'all') {\n      filteredTodos = filteredTodos.filter(todo => todo.priority === currentPriorityFilter);\n    }\n\n    if (currentTagFilter) {\n      const lowerTagFilter = currentTagFilter.toLowerCase();\n      filteredTodos = filteredTodos.filter(todo =>\n        todo.tags.some(t => t.toLowerCase() === lowerTagFilter)\n      );\n    }\n\n    let sortedTodos = appLogic.sortTodos(filteredTodos, currentSortCriteria.field, currentSortCriteria.direction);\n\n    const renderData = {\n      name: viewTitle,\n      todos: sortedTodos,\n      isGlobalSearch: isGlobalMode\n    };\n\n    domController.renderTodos(renderData);\n    domController.updateProjectTitle(viewTitle);\n    domController.elements.addTodoBtn.style.display = currentProjectFromSidebar ? 'block' : 'none';\n  }\n\n  if (dueDateFilterInput) {\n    dueDateFilterInput.addEventListener('change', (e) => {\n      currentDueDateFilter = e.target.value;\n      currentSearchTerm = '';\n      if (searchInput) searchInput.value = '';\n      updateAndRenderTodos();\n    });\n  }\n\n  if (clearDateFilterBtn) {\n    clearDateFilterBtn.addEventListener('click', () => {\n      currentDueDateFilter = null;\n      if (dueDateFilterInput) dueDateFilterInput.value = '';\n      clearDateFilterBtn.style.display = 'none';\n      updateAndRenderTodos();\n    });\n  }\n\n  if (showTodayTasksBtn) {\n    showTodayTasksBtn.addEventListener('click', () => {\n      const today = formatDateFns(startOfDayFns(new Date()), 'yyyy-MM-dd');\n      currentDueDateFilter = today;\n      if (dueDateFilterInput) dueDateFilterInput.value = today;\n      currentSearchTerm = '';\n      if (searchInput) searchInput.value = '';\n      updateAndRenderTodos();\n    });\n  }\n\n  if (searchInput) {\n    searchInput.addEventListener('input', (e) => {\n      currentSearchTerm = e.target.value;\n      if (currentSearchTerm.trim() !== '') {\n        currentDueDateFilter = null;\n        if (dueDateFilterInput) dueDateFilterInput.value = '';\n        if (clearDateFilterBtn) clearDateFilterBtn.style.display = 'none';\n      }\n      updateAndRenderTodos();\n    });\n  }\n\n  if (priorityFilterSelect) {\n    priorityFilterSelect.addEventListener('change', (e) => {\n      currentPriorityFilter = e.target.value;\n      updateAndRenderTodos();\n    });\n  }\n\n  if (tagFilterArea) {\n    tagFilterArea.addEventListener('click', (e) => {\n      if (e.target.classList.contains('tag-filter-item')) {\n        const clickedTag = e.target.dataset.tag;\n        if (currentTagFilter === clickedTag) {\n          currentTagFilter = null; // Toggle off\n        } else {\n          currentTagFilter = clickedTag;\n        }\n        updateAndRenderTodos();\n      }\n    });\n  }\n\n  if (clearTagFilterBtn) {\n    clearTagFilterBtn.addEventListener('click', () => {\n      if (currentTagFilter !== null) {\n        currentTagFilter = null;\n        updateAndRenderTodos();\n      }\n    });\n  }\n\n  // Helper function to manage multiple dropdowns\n  function closeAllDropdowns(exceptThisOne = null) {\n    document.querySelectorAll('.actions-dropdown.visible').forEach(dropdown => {\n      if (dropdown !== exceptThisOne) {\n        dropdown.classList.remove('visible');\n      }\n    });\n  }\n\n  // Project event listeners\n  domController.elements.addProjectBtn.addEventListener('click', () => {\n    domController.openProjectModal();\n  });\n\n  domController.elements.closeProjectModalBtn.addEventListener('click', () => {\n    domController.closeProjectModal();\n  });\n\n  // Project form submission\n  domController.elements.projectForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const projectData = domController.getProjectFormData();\n    if (projectData) {\n      let result;\n      let action = 'added';\n      if (projectData.id) { // Editing existing project\n        result = appLogic.updateProject(projectData.id, projectData.name);\n        action = 'updated';\n        if (result && result.error === 'duplicate') {\n          domController.showNotification(`Project name \"${projectData.name}\" already exists`);\n          return;\n        }\n      } else { // Adding new project\n        result = appLogic.addProject(projectData.name);\n      }\n\n      if (result && !result.error) {\n        if (action === 'added') appLogic.setCurrentProject(result.id);\n        refreshProjectsList();\n        updateAndRenderTodos();\n        domController.closeProjectModal();\n        domController.showNotification(`Project \"${result.name}\" ${action}`);\n      } else if (action === 'added') {\n        domController.showNotification('Unable to add project');\n      }\n    }\n  });\n\n  if (sortTodosSelect) {\n    sortTodosSelect.addEventListener('change', (e) => {\n      const [field, direction] = e.target.value.split('_');\n      currentSortCriteria = { field, direction };\n      updateAndRenderTodos();\n    });\n  }\n\n  document.addEventListener('click', (e) => {\n    // Close dropdowns when clicking outside\n    if (!e.target.closest('.more-actions-btn') && !e.target.closest('.actions-dropdown')) {\n      closeAllDropdowns();\n    }\n  });\n\n  // Actions on a project\n  domController.elements.projectsListUL.addEventListener('click', (e) => {\n    const projectLi = e.target.closest('li[data-project-id]');\n    if (!projectLi) return;\n\n    const projectId = projectLi.dataset.projectId;\n    if (e.target.closest('.more-actions-btn')) {\n      e.stopPropagation(); // Prevent project selection click when opening dropdown\n      const dropdown = e.target.closest('.more-actions-btn').nextElementSibling;\n      if (dropdown && dropdown.classList.contains('actions-dropdown')) {\n        const isVisible = dropdown.classList.contains('visible');\n        closeAllDropdowns(dropdown);\n        if (!isVisible) {\n          dropdown.classList.add('visible');\n          projectLi.style.zIndex = '2';\n        } else {\n          projectLi.style.zIndex = '';\n        }\n      }\n    } else if (e.target.closest('.edit-project')) {\n      closeAllDropdowns();\n      const projectToEdit = appLogic.getProjectById(projectId);\n      if (projectToEdit) {\n        domController.openProjectModal(projectToEdit);\n      }\n    } else if (e.target.closest('.delete-project')) {\n      closeAllDropdowns();\n      const projectToDelete = appLogic.getProjectById(projectId);\n      if (projectToDelete && confirm(`You will permanently delete project \"${projectToDelete.name}\" and all its tasks.`)) {\n        const result = appLogic.removeProject(projectId);\n        if (result.success) {\n          domController.showNotification(`Project \"${result.removedProjectName}\" deleted`);\n          refreshProjectsList();\n          // If the current project was deleted, updateAndRenderTodos will handle it based on new currentProject from appLogic\n          updateAndRenderTodos();\n        } else if (result.error === 'last_project') {\n          domController.showNotification('Unable to delete the last project');\n        } else {\n          domController.showNotification('Unable to delete project');\n        }\n      }\n    } else if (e.target.closest('.project-name') || e.target === projectLi) { // Click on name or li itself\n      // Ensure dropdown clicks don't trigger project selection\n      if (!e.target.closest('.actions-dropdown') && !e.target.closest('.more-actions-btn')) {\n        closeAllDropdowns();\n\n        const selectedProjectId = appLogic.getCurrentProject()?.id;\n        if (selectedProjectId !== projectId || currentDueDateFilter || currentSearchTerm) {\n          appLogic.setCurrentProject(projectId);\n          currentSearchTerm = '';\n\n          if (searchInput) searchInput.value = '';\n          currentPriorityFilter = 'all';\n          if (priorityFilterSelect) priorityFilterSelect.value = 'all';\n          currentTagFilter = null;\n          currentSortCriteria = { field: 'dueDate', direction: 'asc' };\n          if (sortTodosSelect) sortTodosSelect.value = 'dueDate_asc';\n          currentDueDateFilter = null;\n          if (dueDateFilterInput) dueDateFilterInput.value = '';\n          if (clearDateFilterBtn) clearDateFilterBtn.style.display = 'none';\n          updateAndRenderTodos();\n        }\n      }\n    }\n  });\n\n  // To-do event listeners\n  domController.elements.addTodoBtn.addEventListener('click', () => {\n    const currentProject = appLogic.getCurrentProject();\n    if (currentProject) {\n      domController.openTodoModal(null, currentProject.id);\n    } else {\n      domController.showNotification('Please select project to add task');\n    }\n  });\n\n  domController.elements.closeTodoModalBtn.addEventListener('click', () => {\n    domController.closeTodoModal();\n  });\n\n  // To-do form submission\n  domController.elements.todoForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const todoData = domController.getTodoFormData();\n    if (todoData) {\n      let success = false;\n      if (todoData.id) { // Editing existing todo\n        if (appLogic.updateTodoInProject(todoData.currentProjectId, todoData.id, todoData)) {\n          success = true;\n        }\n      } else { // Adding new todo\n        if (appLogic.addTodoToProject(todoData.currentProjectId, todoData)) {\n          success = true;\n        }\n      }\n\n      if (success) {\n        updateAndRenderTodos();\n        domController.closeTodoModal();\n        domController.showNotification(todoData.id ? 'Task updated' : 'Task added');\n      } else {\n        domController.showNotification('Unable to update task');\n      }\n    }\n  });\n\n  // Actions on todo items\n  domController.elements.todosListUL.addEventListener('click', (e) => {\n    const target = e.target;\n    const todoLi = target.closest('li[data-todo-id]');\n    if (!todoLi) return;\n\n    const todoId = todoLi.dataset.todoId;\n    let projectIdForAction = todoLi.dataset.originalProjectId || appLogic.getCurrentProject()?.id;\n\n    if (!todoId || !projectIdForAction) return;\n\n    if (target.closest('.more-actions-btn')) {\n      e.stopPropagation();\n      const dropdown = target.closest('.more-actions-btn').nextElementSibling;\n      if (dropdown && dropdown.classList.contains('actions-dropdown')) {\n        const isVisible = dropdown.classList.contains('visible');\n        closeAllDropdowns(dropdown);\n        if (!isVisible) {\n          dropdown.classList.add('visible');\n          todoLi.style.zIndex = '2';\n        } else {\n          todoLi.style.zIndex = '';\n        }\n      }\n\n    } else if (target.closest('.delete-todo')) {\n      closeAllDropdowns();\n      const project = appLogic.getProjectById(projectIdForAction);\n      const todoToDelete = project.getTodoById(todoId);\n      if (confirm(`You will permanently delete task \"${todoToDelete.title}\".`)) {\n        appLogic.removeTodoFromProject(projectIdForAction, todoId);\n        domController.showNotification('Task deleted');\n        updateAndRenderTodos();\n      }\n\n    } else if (target.closest('.edit-todo')) {\n      closeAllDropdowns();\n      const todoToEdit = appLogic\n        .getProjectById(projectIdForAction)\n        ?.getTodoById(todoId);\n      if (todoToEdit) {\n        domController.openTodoModal(todoToEdit, projectIdForAction);\n      }\n\n    } else if (target.closest('.todo-checkbox')) {\n      closeAllDropdowns();\n      appLogic.toggleTodoComplete(projectIdForAction, todoId);\n      updateAndRenderTodos();\n\n    } else if (target.closest('.expand-todo-btn')) {\n      closeAllDropdowns();\n      const btn = target.closest('.expand-todo-btn');\n      const detailsDiv = todoLi.querySelector('.todo-full-details');\n      if (detailsDiv) {\n        const isHidden = detailsDiv.classList.contains('hidden');\n        if (isHidden) {\n          detailsDiv.classList.remove('hidden');\n          detailsDiv.classList.add('visible');\n          btn.innerHTML = '<span class=\"material-symbols-outlined\">expand_circle_up</span>';\n          btn.title = 'Hide details';\n          todoLi.classList.add('details-expanded');\n        } else {\n          detailsDiv.classList.add('hidden');\n          detailsDiv.classList.remove('visible');\n          btn.innerHTML = '<span class=\"material-symbols-outlined\">expand_circle_down</span>';\n          btn.title = 'Show details';\n          todoLi.classList.remove('details-expanded');\n        }\n      }\n    }\n  });\n\n  // Close modals if clicked outside\n  window.addEventListener('click', (e) => {\n    if (e.target === domController.elements.projectModal) {\n      domController.closeProjectModal();\n    }\n    if (e.target === domController.elements.todoModal) {\n      domController.closeTodoModal();\n    }\n  });\n\n  // Initial render based on loaded data\n  if (appLogic.getCurrentProject()) {\n    updateAndRenderTodos();\n  } else if (appLogic.getAllProjects().length > 0) {\n    // If no current project but projects exist, select the first one\n    const firstProject = appLogic.getAllProjects()[0];\n    appLogic.setCurrentProject(firstProject.id);\n    refreshProjectsList();\n    updateAndRenderTodos();\n  } else {\n    domController.updateProjectTitle('Add a project');\n    domController.renderTodos(null);\n  }\n\n  // Helper function to refresh project list\n  function refreshProjectsList(currentProjectId = null) {\n    const projects = appLogic.getAllProjects();\n    domController.renderProjects(projects, currentProjectId);\n  }\n\n  // Initial setup\n  domController.initializeUI();\n  refreshProjectsList(appLogic.getCurrentProject()?.id); // Initially highlight selected project\n\n  // Default to today's tasks\n  const todayDefault = formatDateFns(startOfDayFns(new Date()), 'yyyy-MM-dd');\n  currentDueDateFilter = todayDefault;\n  if (dueDateFilterInput) dueDateFilterInput.value = todayDefault;\n  if (clearDateFilterBtn) clearDateFilterBtn.style.display = 'block';\n\n  updateAndRenderTodos(); //\n});"],"names":["constructor","title","description","dueDate","priority","tags","arguments","length","undefined","completed","this","id","concat","Date","now","Math","random","toString","slice","isNaN","valueOf","trim","parsedDate","Array","isArray","toggleComplete","updateDetails","details","includes","map","tag","filter","tagsString","setTagsFromString","addTag","trimmedTag","push","removeTag","tagToRemove","trimmedTagToRemove","getTagsString","join","split","name","todos","addTodo","todoItem","Todo","some","todo","removeTodo","todoId","getTodoById","find","getAllTodos","getTodosByPriority","priorityLevel","getTodosByCompletion","completionStatus","getTodosByTag","toLowerCase","t","getUniqueTags","allTags","Set","forEach","add","from","sort","STORAGE_KEY","data","serializedData","JSON","stringify","localStorage","setItem","error","console","getItem","parse","appLogic","projects","currentProject","saveProjects","storage","getProjectById","projectId","p","getTodosAcrossProjects","reduce","acc","project","priorityOrder","loadedData","plainProject","Project","plainTodo","workProject","personalProject","learningProject","createSampleData","loadProjects","addProject","newProject","updateProject","newName","projectToUpdate","removeProject","projectIndex","findIndex","removedProject","splice","success","removedProjectName","newCurrentProject","getAllProjects","setCurrentProject","getCurrentProject","addTodoToProject","todoDetails","newTodo","removeTodoFromProject","updateTodoInProject","updatedDetails","otherDetails","_objectWithoutProperties","_excluded","toggleTodoComplete","getTodosWithProjectInfo","allTodosWithProjectInfo","_objectSpread","originalProjectId","projectName","getTodosDueOnDate","targetDateString","targetDate","startOfDay","dueTodosWithProjectInfo","isEqual","searchTodosInList","searchTerm","lowerSearchTerm","getTagsAcrossProjects","filterTodosByTagAcrossProjects","allTodos","filterTodosByPriorityAcrossProjects","sortTodos","sortField","sortDirection","sorted","a","b","valA","valB","comparison","domController","projectsListUL","document","getElementById","addProjectBtn","currentProjectTitle","addTodoBtn","todosListUL","tagFilterArea","clearTagFilterBtn","notificationArea","projectModal","projectForm","projectIdInput","projectNameInput","saveProjectBtn","closeProjectModalBtn","todoModal","todoForm","todoIdInput","todoTitleInput","todoDescriptionInput","todoDueDateInput","todoPriorityInput","todoTagsInput","closeTodoModalBtn","clearElement","element","firstChild","removeChild","updateProjectTitle","textContent","clearFormErrors","formElement","querySelectorAll","fieldContainer","input","querySelector","helpSpan","errorSpan","classList","remove","setCustomValidity","style","display","showFieldError","inputElement","message","parentElement","renderProjects","currentProjectId","span","createElement","appendChild","li","dataset","nameSpan","actionsDiv","moreBtn","innerHTML","dropdown","editLi","deleteLi","renderTodos","projectOrSearchResults","isGlobalSearch","todoPreviewContent","checkbox","type","checked","todoInfoDiv","titleSpan","dueDateSpan","date","isValidDate","format","prioritySpan","priorityText","charAt","toUpperCase","projectLabelSpan","expandBtn","fullDetailsDiv","descriptionP","descriptionText","createTextNode","tagsDiv","tagSpan","openProjectModal","projectToEdit","reset","value","focus","closeProjectModal","openTodoModal","todoToEdit","closeTodoModal","getProjectFormData","isValid","validity","valueMissing","getTodoFormData","showNotification","notification","addEventListener","e","animationName","renderTagCloud","activeTag","tagElement","noTagsMsg","fontSize","contains","initializeUI","elements","_appLogic$getCurrentP3","currentSearchTerm","currentPriorityFilter","currentTagFilter","currentSortCriteria","field","direction","currentDueDateFilter","searchInput","priorityFilterSelect","sortTodosSelect","dueDateFilterInput","clearDateFilterBtn","showTodayTasksBtn","updateAndRenderTodos","todosToDisplay","viewTitle","isGlobalMode","currentProjectFromSidebar","formatDateFns","refreshProjectsList","projectData","tagsForCloud","refreshTagCloud","filteredTodos","lowerTagFilter","renderData","closeAllDropdowns","exceptThisOne","target","today","startOfDayFns","clickedTag","preventDefault","result","action","closest","projectLi","stopPropagation","nextElementSibling","isVisible","zIndex","projectToDelete","confirm","_appLogic$getCurrentP","todoData","_appLogic$getCurrentP2","todoLi","projectIdForAction","todoToDelete","_appLogic$getProjectB","btn","detailsDiv","window","firstProject","todayDefault"],"sourceRoot":""}