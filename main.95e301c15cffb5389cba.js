"use strict";(self.webpackChunktodo_list=self.webpackChunktodo_list||[]).push([[792],{280:function(t,e,o){var n=class{constructor(t,e,o,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(this.id="todo-".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,11)),this.title=t,this.description=e,this.dueDate=null,o instanceof Date&&!isNaN(o.valueOf()))this.dueDate=o;else if("string"==typeof o&&""!==o.trim()){const t=new Date(o.trim());this.dueDate=isNaN(t.valueOf())?null:t}else this.dueDate=null;this.priority=n,this.tags=Array.isArray(r)?r:[],this.completed=i}toggleComplete(){this.completed=!this.completed}updateDetails(t){if(void 0!==t.title&&(this.title=t.title),void 0!==t.description&&(this.description=t.description),void 0!==t.dueDate)if(t.dueDate instanceof Date&&!isNaN(t.dueDate.valueOf()))this.dueDate=t.dueDate;else if("string"==typeof t.dueDate&&""!==t.dueDate.trim()){const e=new Date(t.dueDate.trim());this.dueDate=isNaN(e.valueOf())?null:e}else this.dueDate=null;t.priority&&["low","medium","high"].includes(t.priority)&&(this.priority=t.priority),t.tags&&Array.isArray(t.tags)?this.tags=t.tags.map((t=>t.trim())).filter((t=>t.length>0)):void 0!==t.tagsString&&this.setTagsFromString(t.tagsString)}addTag(t){const e=t.trim();e&&!this.tags.includes(e)&&this.tags.push(e)}removeTag(t){const e=t.trim();this.tags=this.tags.filter((t=>t!==e))}getTagsString(){return this.tags.join(", ")}setTagsFromString(t){"string"==typeof t&&(this.tags=t.split(",").map((t=>t.trim())).filter((t=>t.length>0)))}},r=class{constructor(t){this.id="project-".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,11)),this.name=t,this.todos=[]}addTodo(t){return t instanceof n&&!this.todos.some((e=>e.id===t.id))&&(this.todos.push(t),!0)}removeTodo(t){this.todos=this.todos.filter((e=>e.id!==t))}getTodoById(t){return this.todos.find((e=>e.id===t))}getAllTodos(){return[...this.todos]}getTodosByPriority(t){return this.todos.filter((e=>e.priority===t))}getTodosByCompletion(t){return this.todos.filter((e=>e.completed===t))}getTodosByTag(t){const e=t.trim().toLowerCase();return e?this.todos.filter((t=>t.tags.some((t=>t.toLowerCase()===e)))):this.getAllTodos()}getUniqueTags(){const t=new Set;return this.todos.forEach((e=>{e.tags.forEach((e=>t.add(e.trim())))})),Array.from(t).sort()}};const i="todoAppProjects";var d=function(t){try{const e=JSON.stringify(t);localStorage.setItem(i,e)}catch(t){console.error("Error saving data to localStorage:",t)}},a=function(){try{const t=localStorage.getItem(i);if(null===t)return;return JSON.parse(t)}catch(t){return void console.error("Error loading data from localStorage:",t)}},s=o(463),c=o(807),l=o(524);const u=["tagsString"];function m(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function p(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?m(Object(o),!0).forEach((function(e){g(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function g(t,e,o){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}const f=(()=>{let t=[],e=null;function o(){d(t)}function i(e){return t.find((t=>t.id===e))}function m(){return t.reduce(((t,e)=>t.concat(e.getAllTodos())),[])}const g={high:1,medium:2,low:3};return function(){const i=a();i&&i.length>0?(t=i.map((t=>{const e=new r(t.name);return e.id=t.id,e.todos=t.todos.map((t=>{const e=new n(t.title,t.description,t.dueDate,t.priority,t.tags||[],t.completed);return e.id=t.id,e})),e})),e=t[0]||null):function(){const i=new r("Work");i.addTodo(new n("Finish Q2 report","Compile required data and finalize the conclusion.",new Date(2025,4,26),"high",["report"],!1)),i.addTodo(new n("Team meeting prep","Prepare agenda and slides for Monday's team meeting.",new Date(2025,5,6),"medium",["meeting"],!1)),i.addTodo(new n("Client follow-up","Call John Doe regarding project Alpha.","","medium",["client"],!0));const d=new r("Personal");d.addTodo(new n("Grocery shopping","Milk, eggs, chicken, fruits.",new Date(2025,4,20),"low",["home","shopping"],!1)),d.addTodo(new n("Book doctor appointment","Annual check-up.",new Date(2025,5,10),"high",["health"],!1));const a=new r("Learning");a.addTodo(new n("Webpack Deep Dive","Understand loaders and plugins.",new Date(2025,4,30),"medium",["dev"],!0)),a.addTodo(new n('Read "The Pragmatic Programmer"',"Chapter 3-5","","low",["reading","dev"],!1)),t=[i,d,a],e=i,o()}()}(),{addProject:function(e){if(e&&!t.find((t=>t.name.toLowerCase()===e.toLowerCase()))){const n=new r(e);return t.push(n),o(),n}return null},updateProject:function(e,n){const r=i(e);return r?t.some((t=>t.id!==e&&t.name.toLowerCase()===n.toLowerCase()))?{error:"duplicate",project:r}:(r.name=n,o(),r):null},removeProject:function(n){const r=t.findIndex((t=>t.id===n));if(r>-1){if(1===t.length)return{error:"last_project"};const i=t.splice(r,1)[0];return e&&e.id===n&&(e=t.length>0?t[0]:null),o(),{success:!0,removedProjectName:i.name,newCurrentProject:e}}return{error:"not_found"}},getProjectById:i,getAllProjects:function(){return[...t]},setCurrentProject:function(t){const o=i(t);return!!o&&(e=o,!0)},getCurrentProject:function(){return e},addTodoToProject:function(t,e){const r=i(t);if(r){const{title:t,description:i,dueDate:d,priority:a,tagsString:s}=e,c=new n(t,i,d,a);return s&&c.setTagsFromString(s),r.addTodo(c),o(),c}return null},removeTodoFromProject:function(t,e){const n=i(t);return!!n&&(n.removeTodo(e),o(),!0)},updateTodoInProject:function(t,e,n){const r=i(t);if(r){const t=r.getTodoById(e);if(t){if(void 0!==n.tagsString){t.setTagsFromString(n.tagsString);const{tagsString:e}=n,o=function(t,e){if(null==t)return{};var o,n,r=function(t,e){if(null==t)return{};var o={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;o[n]=t[n]}return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)o=i[n],-1===e.indexOf(o)&&{}.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}(n,u);t.updateDetails(o)}else t.updateDetails(n);return o(),t}}return null},toggleTodoComplete:function(t,e){const n=i(t);if(n){const t=n.getTodoById(e);if(t)return t.toggleComplete(),o(),t}return null},getTodosAcrossProjects:m,getTodosWithProjectInfo:function(){const e=[];return t.forEach((t=>{t.getAllTodos().forEach((o=>{e.push(p(p({},o),{},{originalProjectId:t.id,projectName:t.name}))}))})),e},getTodosDueOnDate:function(e){if(!e)return[];const o=(0,s.o)((0,c.qg)(e,"yyyy-MM-dd",new Date));if(isNaN(o.valueOf()))return[];const n=[];return t.forEach((t=>{t.getAllTodos().forEach((e=>{e.dueDate&&(0,l.n)((0,s.o)(e.dueDate),o)&&n.push(p(p({},e),{},{originalProjectId:t.id,projectName:t.name}))}))})),n},searchTodosInList:function(t,e){if(!e||""===e.trim())return t;const o=e.toLowerCase();return t.filter((t=>t.title.toLowerCase().includes(o)||t.description.toLowerCase().includes(o)))},getTagsAcrossProjects:function(){const e=new Set;return t.forEach((t=>{t.getUniqueTags().forEach((t=>e.add(t)))})),Array.from(e).sort()},filterTodosByTagAcrossProjects:function(t){const e=m(),o=t.trim().toLowerCase();return o?e.filter((t=>t.tags.some((t=>t.toLowerCase()===o)))):e},filterTodosByPriorityAcrossProjects:function(t){return m().filter((e=>e.priority===t))},sortTodos:function(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";const n=[...t];return n.sort(((t,n)=>{let r,i;switch(e){case"dueDate":if(null===t.dueDate&&null===n.dueDate)return 0;if(null===t.dueDate)return 1;if(null===n.dueDate)return-1;r=t.dueDate,i=n.dueDate;break;case"priority":r=g[t.priority],i=g[n.priority];break;default:return 0}let d=0;return r>i?d=1:r<i&&(d=-1),"desc"===o?-1*d:d})),n}}})();var h=f,y=o(790),v=o(85);const j=(()=>{const t=document.getElementById("projects-list"),e=document.getElementById("add-project-btn"),o=document.getElementById("current-project-title"),n=document.getElementById("add-todo-btn"),r=document.getElementById("todos-list"),i=document.getElementById("tag-filter-area"),d=document.getElementById("clear-tag-filter-btn"),a=document.getElementById("notification-area"),s=document.getElementById("project-modal"),c=document.getElementById("project-form"),l=document.getElementById("project-id"),u=document.getElementById("project-name-input"),m=document.getElementById("save-project-btn"),p=document.getElementById("close-project-modal"),g=document.getElementById("todo-modal"),f=document.getElementById("todo-form"),h=document.getElementById("todo-id"),j=document.getElementById("todo-title-input"),E=document.getElementById("todo-description-input"),P=document.getElementById("todo-dueDate-input"),T=document.getElementById("todo-priority-input"),L=document.getElementById("todo-tags-input"),C=document.getElementById("close-todo-modal");function w(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function b(t){o.textContent=t||"No project selected"}function I(t){t.querySelectorAll(".form-input, .form-select").forEach((t=>{t.setCustomValidity("")})),t.querySelectorAll(".error-message").forEach((t=>{t.textContent=""}))}function D(t,e){const o=t.parentElement.querySelector(".help-message"),n=t.parentElement.querySelector(".error-message");t.setCustomValidity(e),n.textContent=e,o&&o.remove()}return{renderProjects:function(e,o){if(w(t),!e||0===e.length){const e=document.createElement("span");return e.textContent="No projects yet.",void t.appendChild(e)}e.forEach((e=>{const n=document.createElement("li");n.dataset.projectId=e.id;const r=document.createElement("span");r.classList.add("project-name"),r.textContent=e.name,n.appendChild(r);const i=document.createElement("div");i.classList.add("project-actions");const d=document.createElement("button");d.classList.add("more-actions-btn"),d.innerHTML="&#x22EE;",d.title="More options",d.dataset.projectId=e.id,i.appendChild(d);const a=document.createElement("ul");a.classList.add("actions-dropdown");const s=document.createElement("li");s.textContent="Edit",s.classList.add("edit-project"),s.dataset.projectId=e.id,a.appendChild(s);const c=document.createElement("li");c.textContent="Delete",c.classList.add("delete-project"),c.dataset.projectId=e.id,a.appendChild(c),i.appendChild(a),n.appendChild(i),e.id===o&&n.classList.add("active"),t.appendChild(n)}))},renderTodos:function(t){w(r);const e=t&&!0===t.isGlobalSearch,o=t?t.todos:[];if(b(t?t.name:"Select a Project"),!o||0===o.length){const o=document.createElement("span");return o.textContent=e?"No tasks found matching your search.":t?"No tasks in this project yet.":"Select a project or enter a search term.",void r.appendChild(o)}o.forEach((t=>{const o=document.createElement("li");o.dataset.todoId=t.id,e&&t.originalProjectId&&(o.dataset.originalProjectId=t.originalProjectId),o.classList.add("priority-".concat(t.priority)),t.completed&&o.classList.add("todo-completed");const n=document.createElement("div");n.classList.add("todo-preview-content");const i=document.createElement("input");i.type="checkbox",i.checked=t.completed,i.classList.add("todo-checkbox"),i.dataset.todoId=t.id;const d=document.createElement("div");d.classList.add("todo-info");const a=document.createElement("span");a.classList.add("todo-title"),a.textContent=t.title;const s=document.createElement("span");var c;if(s.classList.add("todo-due-date"),s.textContent="Due: ".concat((c=t.dueDate)instanceof Date&&(0,y.f)(c)?(0,v.GP)(c,"MMM dd, yyyy"):"No date set"),d.appendChild(i),d.appendChild(a),d.appendChild(s),e&&t.projectName){const e=document.createElement("span");e.classList.add("todo-project-label"),e.textContent="(Project: ".concat(t.projectName,")"),d.appendChild(e)}if(t.tags&&t.tags.length>0){const e=document.createElement("div");e.classList.add("todo-tags-display"),t.tags.forEach((t=>{const o=document.createElement("span");o.classList.add("tag-label"),o.textContent=t,e.appendChild(o)})),d.appendChild(e)}const l=document.createElement("div");l.classList.add("todo-actions");const u=document.createElement("button");u.classList.add("expand-todo-btn"),u.innerHTML="&#43;",u.title="Show details",u.dataset.todoId=t.id,l.appendChild(u);const m=document.createElement("button");m.classList.add("more-actions-btn"),m.innerHTML="&#x22EE;",m.title="More options",m.dataset.todoId=t.id,l.appendChild(m);const p=document.createElement("ul");p.classList.add("actions-dropdown");const g=document.createElement("li");g.textContent="Edit",g.classList.add("edit-todo"),g.dataset.todoId=t.id,p.appendChild(g);const f=document.createElement("li");f.textContent="Delete",f.classList.add("delete-todo"),f.dataset.todoId=t.id,p.appendChild(f),l.appendChild(p),n.appendChild(d),n.appendChild(l),o.appendChild(n);const h=document.createElement("div");h.classList.add("todo-full-details","hidden");const j=document.createElement("p");j.innerHTML="Description: ";const E=document.createTextNode(t.description||"No description");j.appendChild(E);const P=document.createElement("p"),T=t.priority.charAt(0).toUpperCase()+t.priority.slice(1);P.innerHTML='Priority: <span class="priority-text-'.concat(t.priority,'">').concat(T,"</span>"),h.appendChild(j),h.appendChild(P),o.appendChild(h),r.appendChild(o)}))},updateProjectTitle:b,openProjectModal:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;I(c),c.reset(),l.value="",m.textContent="Save",t&&(l.value=t.id,u.value=t.name),s.style.display="block",u.focus()},closeProjectModal:function(){s.style.display="none"},openTodoModal:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;I(f),f.reset(),h.value="",t&&(h.value=t.id,j.value=t.title,E.value=t.description,P.value=t.dueDate&&(0,y.f)(t.dueDate)?(0,v.GP)(t.dueDate,"yyyy-MM-dd"):"",T.value=t.priority,L.value=t.tags?t.getTagsString():""),f.dataset.currentProjectId=e,g.style.display="block",j.focus()},closeTodoModal:function(){g.style.display="none"},getProjectFormData:function(){I(c);let t=!0;const e=u.value.trim(),o=l.value;return u.validity.valueMissing&&(D(u,"Project name is required."),t=!1),t?{id:o,name:e}:null},getTodoFormData:function(){I(f);let t=!0;const e=j.value.trim(),o=E.value.trim(),n=P.value,r=T.value,i=L.value.trim(),d=h.value,a=f.dataset.currentProjectId;return j.validity.valueMissing&&(D(j,"Task name is required."),t=!1),t?{id:d,title:e,description:o,dueDate:n,priority:r,tagsString:i,currentProjectId:a}:null},clearElement:w,showNotification:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const o=document.createElement("div");o.classList.add("notification",e),o.textContent=t,a.appendChild(o),o.addEventListener("animationend",(t=>{"fadeOutNotification"===t.animationName&&o.remove()}))},renderTagCloud:function(t,e){if(i){if(w(i),t&&t.length>0)t.forEach((t=>{const o=document.createElement("span");o.classList.add("tag-filter-item"),o.textContent=t,o.dataset.tag=t,t===e&&o.classList.add("active"),i.appendChild(o)}));else{const t=document.createElement("span");t.textContent="No tags available for filtering.",t.style.fontSize="0.9em",t.style.color="#666",i.appendChild(t)}d&&(d.style.display=e?"inline":"none"),d&&!i.contains(d)&&t.length>0&&i.appendChild(d)}},initializeUI:function(){b("Loading projects..."),w(r);const t=document.createElement("li");t.textContent="Select or add a project to see your tasks.",r.appendChild(t),n.style.display="none"},elements:{projectModal:s,todoModal:g,projectsListUL:t,todosListUL:r,addProjectBtn:e,addTodoBtn:n,projectForm:c,todoForm:f,closeProjectModalBtn:p,closeTodoModalBtn:C,clearTagFilterBtn:d}}})();var E=j;document.addEventListener("DOMContentLoaded",(()=>{var t;let e="",o="all",n=null,r={field:"dueDate",direction:"asc"},i=null;const d=document.getElementById("search-todos-input"),a=document.getElementById("priority-filter"),c=document.getElementById("tag-filter-area"),l=document.getElementById("clear-tag-filter-btn"),u=document.getElementById("sort-todos"),m=document.getElementById("due-date-filter-input"),p=document.getElementById("clear-date-filter-btn"),g=document.getElementById("show-today-tasks-btn");function f(){let t=[],a="",s=!1;const c=h.getCurrentProject();if(i)a="Tasks due on ".concat((0,v.GP)(new Date(i+"T00:00:00"),"MMM dd, yyyy")),t=h.getTodosDueOnDate(i),s=!0,p&&(p.style.display="block"),d&&(d.value=""),e="",j(null);else if(e&&""!==e.trim()){a="Search results for '".concat(e,"'");const o=h.getTodosWithProjectInfo();t=h.searchTodosInList(o,e),s=!0,p&&(p.style.display="none"),j(null)}else if(c){const e=h.getProjectById(c.id);t=e?e.getAllTodos():[],a=e?e.name:"Project not found",j(c.id),p&&(p.style.display="none"),j(c.id)}else a="Select a date, project, or search",t=[],s=!1,p&&(p.style.display="none"),j(null);!function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=[];const o=h.getCurrentProject();if(t)e=h.getTagsAcrossProjects();else if(o){const t=h.getProjectById(o.id);e=t?t.getUniqueTags():[]}else e=h.getTagsAcrossProjects();E.renderTagCloud(e,n)}(s||!c);let l=[...t];if("all"!==o&&(l=l.filter((t=>t.priority===o))),n){const t=n.toLowerCase();l=l.filter((e=>e.tags.some((e=>e.toLowerCase()===t))))}const u={name:a,todos:h.sortTodos(l,r.field,r.direction),isGlobalSearch:s};E.renderTodos(u),E.updateProjectTitle(a),E.elements.addTodoBtn.style.display=c?"block":"none"}function y(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;document.querySelectorAll(".actions-dropdown.visible").forEach((e=>{e!==t&&e.classList.remove("visible")}))}if(m&&m.addEventListener("change",(t=>{i=t.target.value,e="",d&&(d.value=""),f()})),p&&p.addEventListener("click",(()=>{i=null,m&&(m.value=""),p.style.display="none",f()})),g&&g.addEventListener("click",(()=>{const t=(0,v.GP)((0,s.o)(new Date),"yyyy-MM-dd");i=t,m&&(m.value=t),e="",d&&(d.value=""),f()})),d&&d.addEventListener("input",(t=>{e=t.target.value,""!==e.trim()&&(i=null,m&&(m.value=""),p&&(p.style.display="none")),f()})),a&&a.addEventListener("change",(t=>{o=t.target.value,f()})),c&&c.addEventListener("click",(t=>{if(t.target.classList.contains("tag-filter-item")){const e=t.target.dataset.tag;n=n===e?null:e,f()}})),l&&l.addEventListener("click",(()=>{null!==n&&(n=null,f())})),E.elements.addProjectBtn.addEventListener("click",(()=>{E.openProjectModal()})),E.elements.closeProjectModalBtn.addEventListener("click",(()=>{E.closeProjectModal()})),E.elements.projectForm.addEventListener("submit",(t=>{t.preventDefault();const e=E.getProjectFormData();if(e){let t,o="added";if(e.id){if(t=h.updateProject(e.id,e.name),o="updated",t&&"duplicate"===t.error)return void E.showNotification('Project name "'.concat(e.name,'" already exists.'),"error")}else t=h.addProject(e.name);t&&!t.error?("added"===o&&h.setCurrentProject(t.id),j(),f(),E.closeProjectModal(),E.showNotification('Project "'.concat(t.name,'" ').concat(o,"."),"success")):"added"===o&&E.showNotification("Unable to add project. Name might be invalid.","error")}})),u&&u.addEventListener("change",(t=>{const[e,o]=t.target.value.split("_");r={field:e,direction:o},f()})),document.addEventListener("click",(t=>{t.target.closest(".more-actions-btn")||t.target.closest(".actions-dropdown")||y()})),E.elements.projectsListUL.addEventListener("click",(t=>{const s=t.target.closest("li[data-project-id]");if(!s)return;const c=s.dataset.projectId;if(t.target.classList.contains("more-actions-btn")){t.stopPropagation();const e=t.target.nextElementSibling;e&&e.classList.contains("actions-dropdown")&&(y(e),e.classList.toggle("visible"))}else if(t.target.classList.contains("edit-project")){y();const t=h.getProjectById(c);t&&E.openProjectModal(t)}else if(t.target.classList.contains("delete-project")){y();const t=h.getProjectById(c);if(t&&confirm('You will permanently delete project "'.concat(t.name,'" and all its tasks.'))){const t=h.removeProject(c);t.success?(E.showNotification('Project "'.concat(t.removedProjectName,'" deleted.'),"success"),j(),f()):"last_project"===t.error?E.showNotification("Unable to delete the last project.","error"):E.showNotification("Unable to delete project.","error")}}else if((t.target.closest(".project-name")||t.target===s)&&!t.target.closest(".actions-dropdown")&&!t.target.closest(".more-actions-btn")){var l;y(),((null===(l=h.getCurrentProject())||void 0===l?void 0:l.id)!==c||i||e)&&(h.setCurrentProject(c),e="",d&&(d.value=""),o="all",a&&(a.value="all"),n=null,r={field:"dueDate",direction:"asc"},u&&(u.value="dueDate_asc"),i=null,m&&(m.value=""),p&&(p.style.display="none"),f())}})),E.elements.addTodoBtn.addEventListener("click",(()=>{const t=h.getCurrentProject();t?E.openTodoModal(null,t.id):E.showNotification("Please select project to add task.","warning")})),E.elements.closeTodoModalBtn.addEventListener("click",(()=>{E.closeTodoModal()})),E.elements.todoForm.addEventListener("submit",(t=>{t.preventDefault();const e=E.getTodoFormData();if(e){let t=!1;e.id?h.updateTodoInProject(e.currentProjectId,e.id,e)&&(t=!0):h.addTodoToProject(e.currentProjectId,e)&&(t=!0),t?(f(),E.closeTodoModal(),E.showNotification(e.id?"Task updated.":"Task added.","success")):E.showNotification("Unable to update task.","error")}})),E.elements.todosListUL.addEventListener("click",(t=>{const e=t.target,o=e.closest("li[data-todo-id]");if(!o)return;const n=o.dataset.todoId;let r=o.dataset.originalProjectId;if(!r){const t=h.getCurrentProject();t&&(r=t.id)}if(n&&r)if(t.target.classList.contains("more-actions-btn")){t.stopPropagation();const e=t.target.nextElementSibling;e&&e.classList.contains("actions-dropdown")&&(y(e),e.classList.toggle("visible"))}else if(e.classList.contains("delete-todo")){y();const t=h.getProjectById(r).getTodoById(n);confirm('You will permanently delete task "'.concat(t.title,'".'))&&(h.removeTodoFromProject(r,n),E.showNotification("Task deleted.","success"),f())}else if(e.classList.contains("edit-todo")){var i;y();const t=null===(i=h.getProjectById(r))||void 0===i?void 0:i.getTodoById(n);t&&E.openTodoModal(t,r)}else if(e.classList.contains("todo-checkbox"))y(),h.toggleTodoComplete(r,n),f();else if(e.classList.contains("expand-todo-btn")){y();const t=o.querySelector(".todo-full-details");t&&(t.classList.contains("hidden")?(t.classList.remove("hidden"),t.classList.add("visible"),e.innerHTML="&#8722;",e.title="Hide details",o.classList.add("details-expanded")):(t.classList.add("hidden"),t.classList.remove("visible"),e.innerHTML="&#43;",e.title="Show details",o.classList.remove("details-expanded")))}})),window.addEventListener("click",(t=>{t.target===E.elements.projectModal&&E.closeProjectModal(),t.target===E.elements.todoModal&&E.closeTodoModal()})),h.getCurrentProject())f();else if(h.getAllProjects().length>0){const t=h.getAllProjects()[0];h.setCurrentProject(t.id),j(),f()}else E.updateProjectTitle("Add a project"),E.renderTodos(null);function j(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const e=h.getAllProjects();E.renderProjects(e,t)}E.initializeUI(),j(null===(t=h.getCurrentProject())||void 0===t?void 0:t.id);const P=(0,v.GP)((0,s.o)(new Date),"yyyy-MM-dd");i=P,m&&(m.value=P),p&&(p.style.display="block"),f()}))}},function(t){t.O(0,[464],(function(){return t(t.s=280)})),t.O()}]);
//# sourceMappingURL=main.95e301c15cffb5389cba.js.map